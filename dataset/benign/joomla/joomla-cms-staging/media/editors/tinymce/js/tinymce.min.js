!function(u,l,t,c){"use strict";t.getSize=t.getSize||function(){return{x:t.innerWidth,y:t.innerHeight}},t.jInsertEditorText=function(t,e){l.editors.instances[e].replaceSelection(t)};var e={setupEditors:function(t){t=t||c;for(var e=l.getOptions?l.getOptions("plg_editor_tinymce",{}):l.optionsStorage.plg_editor_tinymce||{},n=t.querySelectorAll(".js-editor-tinymce"),i=0,o=n.length;i<o;i++){var r=n[i].querySelector("textarea");this.setupEditor(r,e)}},setupEditor:function(t,e){var n=t?t.getAttribute("name").replace(/\[\]|\]/g,"").split("[").pop():"default",i=e&&e.tinyMCE||{},o=i.default||{},r=i[n]?i[n]:o;if(r=r.joomlaMergeDefaults?l.extend(l.extend({},o),r):l.extend({},r),t&&(r.selector=null,r.target=t),r.joomlaExtButtons&&r.joomlaExtButtons.names&&r.joomlaExtButtons.names.length){r.toolbar1+=" | "+r.joomlaExtButtons.names.join(" ");var s=r.joomlaExtButtons.script.join(";");r.setupCallbackString=r.setupCallbackString||"",r.setupCallbackString=r.setupCallbackString+";"+s,r.joomlaExtButtons=null}r.setupCallbackString&&!r.setup&&(r.setup=new Function("editor",r.setupCallbackString));var a=new u.Editor(t.id,r,tinymce.EditorManager);a.render(),l.editors.instances[t.id]={getValue:function(){return this.instance.getContent()},setValue:function(t){return this.instance.setContent(t)},getSelection:function(){return this.instance.selection.getContent({format:"text"})},replaceSelection:function(t){return this.instance.execCommand("mceInsertContent",!1,t)},id:t.id,instance:a,onSave:function(){return this.instance.isHidden()&&this.instance.show(),""}},c.getElementById(a.id).form.addEventListener("submit",function(){l.editors.instances[a.targetElm.id].onSave()})}};l.JoomlaTinyMCE=e,c.addEventListener("DOMContentLoaded",function(){l.JoomlaTinyMCE.setupEditors(),t.jQuery&&jQuery(c).on("subform-row-add",function(t,e){l.JoomlaTinyMCE.setupEditors(e)})})}(tinyMCE,Joomla,window,document);
