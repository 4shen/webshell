(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1232e627"],{"1f5a":function(e,t,n){"use strict";var i=n("d607"),l=n.n(i);l.a},"8db2":function(e,t){e.exports={props:{id:{type:String,required:!0},name:{type:String,required:!0},value:{type:null,default:null},type:{type:String,required:!0},length:{type:[String,Number],default:null},readonly:{type:Boolean,default:!1},collection:{type:String,default:null},primaryKey:{type:[Number,String],default:null},required:{type:Boolean,default:!1},options:{type:Object,default:()=>({})},newItem:{type:Boolean,default:!1},relation:{type:Object,default:null},fields:{type:Object,default:null},values:{type:Object,default:null},width:{type:String,default:null,validator(e){return["half","half-left","half-right","full","fill"].includes(e)}}}}},d607:function(e,t,n){},e3d9:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"interface-checkbox-relational subgrid"},[null===e.initialValue?n("v-spinner"):e._l(e.items,(function(t){return n("v-checkbox",{key:"checkbox_relational_"+t.id,style:{flexBasis:100/(e.options.grid||1)+"%"},attrs:{id:e.uid(t),value:String(t[e.relatedPk]),disabled:e.readonly,label:e.labelRendered(t),inputValue:e.selection.includes(t[e.relatedPk])},on:{change:function(n){return e.onSelection(t.id)}}})}))],2)},l=[],a=(n("4de4"),n("4160"),n("caad"),n("c975"),n("d81d"),n("a434"),n("2532"),n("159b"),n("ade3")),r=(n("96cf"),n("1da1")),u=n("8db2"),c=n.n(u),o=n("2ef0"),s={name:"InterfaceCheckboxesRelational",mixins:[c.a],data:function(){return{items:[],selection:[],unchecked:{},initialValue:null}},computed:{relatedPk:function(){var e=this.relation.junction.collection_one.fields;return Object(o["find"])(e,{primary_key:!0}).field},junctionFieldOfRelated:function(){return this.relation.junction.field_many.field},junctionPk:function(){return Object(o["find"])(this.relation.collection_many.fields,{primary_key:!0}).field},junctionPrimaryKey:function(){return Object(o["find"])(this.relation.junction.collection_many.fields,{primary_key:!0}).field}},created:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getInitialValue();case 2:e.getItems(),e.newItem||(e.selection=e.initialValue.map((function(t){return t[e.junctionFieldOfRelated][e.relatedPk]})));case 4:case"end":return t.stop()}}),t)})))()},methods:{getInitialValue:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=[e.junctionPrimaryKey,e.relation.junction_field+".*"],t.next=3,e.$api.getItems(e.relation.collection_many.collection,{fields:n,filter:Object(a["a"])({},e.relation.field_many.field,e.primaryKey)});case 3:i=t.sent,e.initialValue=i.data;case 5:case"end":return t.stop()}}),t)})))()},uid:function(e){return this.$helpers.shortid.generate()+"_"+e.id},getItems:function(){var e=this,t=this.relation.junction.collection_one.collection;this.$api.getItems(t,{}).then((function(t){e.items=t.data}))},labelRendered:function(e){return this.options.template?this.$helpers.micromustache.render(this.options.template,e):this.item[this.relatedPk]},onSelection:function(e){var t=this,n=this.items.filter((function(n){return n[t.relatedPk]==e}))[0];if(this.selection.includes(e)){var i=this.selection.indexOf(e);this.selection.splice(i,1),this.removeItem(e)}else this.selection.push(e),this.addItem(e,n)},prepareItem:function(e){return Object(a["a"])({},this.junctionFieldOfRelated,Object(a["a"])({},this.relatedPk,e[this.relatedPk]))},addItem:function(e,t){var n=this,i=[],l=!1;this.initialValue&&this.initialValue.forEach((function(t){if(t.$delete){var a=n.unchecked[t[n.junctionPk]],r=a[n.junctionFieldOfRelated][n.relatedPk];r==e?(l=!0,i.push(a),delete n.unchecked[t[n.junctionPk]]):i.push(t)}else i.push(t)})),l||i.push(this.prepareItem(t)),this.$emit("input",i)},removeItem:function(e){var t=this,n=[];this.initialValue.forEach((function(i){var l;i.$delete||i[t.junctionFieldOfRelated][t.relatedPk]!=e?n.push(i):i[t.junctionPk]&&(t.unchecked[i[t.junctionPk]]=i,n.push((l={},Object(a["a"])(l,t.junctionPk,i[t.junctionPk]),Object(a["a"])(l,"$delete",!0),l)))})),this.$emit("input",n)}}},d=s,f=(n("1f5a"),n("2877")),h=Object(f["a"])(d,i,l,!1,null,null,null);t["default"]=h.exports}}]);
//# sourceMappingURL=chunk-1232e627.ff03d874.js.map