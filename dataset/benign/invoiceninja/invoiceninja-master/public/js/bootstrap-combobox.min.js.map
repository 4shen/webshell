{"version":3,"sources":["bootstrap-combobox.js"],"names":["$","Combobox","element","options","this","extend","fn","combobox","defaults","template","$source","$container","setup","$element","find","$target","$button","$menu","menu","appendTo","matcher","sorter","highlighter","shown","selected","refresh","transferAttributes","listen","prototype","constructor","before","hide","disable","prop","attr","disabled","addClass","enable","removeClass","parse","that","map","source","selectedValue","each","option","val","placeholder","text","push","appendId","removeAttr","undefined","select","updater","trigger","item","show","pos","position","height","offsetHeight","insertAfter","css","top","left","on","proxy","scrollSafety","off","blur","lookup","event","query","process","items","grep","length","render","slice","bsVersion","toLowerCase","indexOf","beginswith","caseSensitive","caseInsensitive","shift","concat","replace","RegExp","$1","match","i","html","first","next","active","prev","last","toggle","hasClass","clearTarget","triggerChange","clearElement","e","target","tagName","focus","keypress","keyup","eventSupported","keydown","click","mouseenter","mouseleave","eventName","isSupported","setAttribute","move","keyCode","preventDefault","fixMenuScroll","stopPropagation","bottom","scrollTop","menuHeight","suppressKeyPressRepeat","inArray","focused","mousedover","setTimeout","currentTarget","$this","data","Constructor","window","jQuery"],"mappings":"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","file":"bootstrap-combobox.min.js","sourcesContent":["/* =============================================================\n * bootstrap-combobox.js v1.1.7\n * =============================================================\n * Copyright 2012 Daniel Farrell\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ============================================================ */\n\n!function( $ ) {\n\n \"use strict\";\n\n /* COMBOBOX PUBLIC CLASS DEFINITION\n  * ================================ */\n\n  var Combobox = function ( element, options ) {\n    this.options = $.extend({}, $.fn.combobox.defaults, options);\n    this.template = this.options.template || this.template\n    this.$source = $(element);\n    this.$container = this.setup();\n    this.$element = this.$container.find('input[type=text]');\n    this.$target = this.$container.find('input[type=hidden]');\n    this.$button = this.$container.find('.dropdown-toggle');\n    this.$menu = $(this.options.menu).appendTo('body');\n    this.matcher = this.options.matcher || this.matcher;\n    this.sorter = this.options.sorter || this.sorter;\n    this.highlighter = this.options.highlighter || this.highlighter;\n    this.shown = false;\n    this.selected = false;\n    this.refresh();\n    this.transferAttributes();\n    this.listen();\n  };\n\n  Combobox.prototype = {\n\n    constructor: Combobox\n\n  , setup: function () {\n      var combobox = $(this.template());\n      this.$source.before(combobox);\n      this.$source.hide();\n      return combobox;\n    }\n\n  , disable: function() {\n      this.$element.prop('disabled', true);\n      this.$button.attr('disabled', true);\n      this.disabled = true;\n      this.$container.addClass('combobox-disabled');\n    }\n\n  , enable: function() {\n      this.$element.prop('disabled', false);\n      this.$button.attr('disabled', false);\n      this.disabled = false;\n      this.$container.removeClass('combobox-disabled');\n    }\n  , parse: function () {\n      var that = this\n        , map = {}\n        , source = []\n        , selected = false\n        , selectedValue = '';\n      this.$source.find('option').each(function() {\n        var option = $(this);\n        if (option.val() === '') {\n          that.options.placeholder = option.text();\n          return;\n        }\n        map[option.text()] = option.val();\n        source.push(option.text());\n        if (option.prop('selected')) {\n          selected = option.text();\n          selectedValue = option.val();\n        }\n      })\n      this.map = map;\n      if (selected) {\n        this.$element.val(selected);\n        this.$target.val(selectedValue);\n        this.$container.addClass('combobox-selected');\n        this.selected = true;\n      }\n      return source;\n    }\n\n  , transferAttributes: function() {\n    this.options.placeholder = this.$source.attr('data-placeholder') || this.options.placeholder\n    if(this.options.appendId !== \"undefined\") {\n    \tthis.$element.attr('id', this.$source.attr('id') + this.options.appendId);\n    }\n    this.$element.attr('placeholder', this.options.placeholder)\n    this.$target.prop('name', this.$source.prop('name'))\n    this.$target.val(this.$source.val())\n    this.$source.removeAttr('name')  // Remove from source otherwise form will pass parameter twice.\n    this.$element.attr('required', this.$source.attr('required'))\n    this.$element.attr('rel', this.$source.attr('rel'))\n    this.$element.attr('title', this.$source.attr('title'))\n    this.$element.attr('class', this.$source.attr('class'))\n    this.$element.attr('tabindex', this.$source.attr('tabindex'))\n    this.$source.removeAttr('tabindex')\n    if (this.$source.attr('disabled')!==undefined)\n      this.disable();\n  }\n\n  , select: function () {\n      var val = this.$menu.find('.active').attr('data-value');\n      this.$element.val(this.updater(val)).trigger('change');\n      this.$target.val(this.map[val]).trigger('change');\n      this.$source.val(this.map[val]).trigger('change');\n      this.$container.addClass('combobox-selected');\n      this.selected = true;\n      return this.hide();\n    }\n\n  , updater: function (item) {\n      return item;\n    }\n\n  , show: function () {\n      var pos = $.extend({}, this.$element.position(), {\n        height: this.$element[0].offsetHeight\n      });\n\n      this.$menu\n        .insertAfter(this.$element)\n        .css({\n          top: pos.top + pos.height\n        , left: pos.left\n        })\n        .show();\n\n      $('.dropdown-menu').on('mousedown', $.proxy(this.scrollSafety, this));\n\n      this.shown = true;\n      return this;\n    }\n\n  , hide: function () {\n      this.$menu.hide();\n      $('.dropdown-menu').off('mousedown', $.proxy(this.scrollSafety, this));\n      this.$element.on('blur', $.proxy(this.blur, this));\n      this.shown = false;\n      return this;\n    }\n\n  , lookup: function (event) {\n      this.query = this.$element.val();\n      return this.process(this.source);\n    }\n\n  , process: function (items) {\n      var that = this;\n\n      items = $.grep(items, function (item) {\n        return that.matcher(item);\n      })\n\n      items = this.sorter(items);\n\n      if (!items.length) {\n        return this.shown ? this.hide() : this;\n      }\n\n      return this.render(items.slice(0, this.options.items)).show();\n    }\n\n  , template: function() {\n      if (this.options.bsVersion == '2') {\n        return '<div class=\"combobox-container\"><input type=\"hidden\" /> <div class=\"input-append\"> <input type=\"text\" autocomplete=\"false\" /> <span class=\"add-on dropdown-toggle\" data-dropdown=\"dropdown\"> <span class=\"caret\"/> <i class=\"icon-remove\"/> </span> </div> </div>'\n      } else {\n        return '<div class=\"combobox-container\"> <input type=\"hidden\" /> <div class=\"input-group\"> <input type=\"text\" autocomplete=\"false\" /> <span class=\"input-group-addon dropdown-toggle\" data-dropdown=\"dropdown\"> <span class=\"caret\" /> <span class=\"glyphicon glyphicon-remove\" /> </span> </div> </div>'\n      }\n    }\n\n  , matcher: function (item) {\n      return ~item.toLowerCase().indexOf(this.query.toLowerCase());\n    }\n\n  , sorter: function (items) {\n      var beginswith = []\n        , caseSensitive = []\n        , caseInsensitive = []\n        , item;\n\n      while (item = items.shift()) {\n        if (!item.toLowerCase().indexOf(this.query.toLowerCase())) {beginswith.push(item);}\n        else if (~item.indexOf(this.query)) {caseSensitive.push(item);}\n        else {caseInsensitive.push(item);}\n      }\n\n      return beginswith.concat(caseSensitive, caseInsensitive);\n    }\n\n  , highlighter: function (item) {\n      var query = this.query.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, '\\\\$&');\n      return item.replace(new RegExp('(' + query + ')', 'ig'), function ($1, match) {\n        return '<strong>' + match + '</strong>';\n      })\n    }\n\n  , render: function (items) {\n      var that = this;\n\n      items = $(items).map(function (i, item) {\n        i = $(that.options.item).attr('data-value', item);\n        i.find('a').html(that.highlighter(item));\n        return i[0];\n      })\n\n      items.first().addClass('active');\n      this.$menu.html(items);\n      return this;\n    }\n\n  , next: function (event) {\n      var active = this.$menu.find('.active').removeClass('active')\n        , next = active.next();\n\n      if (!next.length) {\n        next = $(this.$menu.find('li')[0]);\n      }\n\n      next.addClass('active');\n    }\n\n  , prev: function (event) {\n      var active = this.$menu.find('.active').removeClass('active')\n        , prev = active.prev();\n\n      if (!prev.length) {\n        prev = this.$menu.find('li').last();\n      }\n\n      prev.addClass('active');\n    }\n\n  , toggle: function () {\n    if (!this.disabled) {\n      if (this.$container.hasClass('combobox-selected')) {\n        this.clearTarget();\n        this.triggerChange();\n        this.clearElement();\n      } else {\n        if (this.shown) {\n          this.hide();\n        } else {\n          this.clearElement();\n          this.lookup();\n        }\n      }\n    }\n  }\n\n  , scrollSafety: function(e) {\n      if (e.target.tagName == 'UL') {\n          this.$element.off('blur');\n      }\n  }\n  , clearElement: function () {\n    this.$element.val('').focus();\n  }\n\n  , clearTarget: function () {\n    this.$source.val('');\n    this.$target.val('');\n    this.$container.removeClass('combobox-selected');\n    this.selected = false;\n  }\n\n  , triggerChange: function () {\n    this.$source.trigger('change');\n  }\n\n  , refresh: function () {\n    this.source = this.parse();\n    this.options.items = this.source.length;\n  }\n\n  , listen: function () {\n      this.$element\n        .on('focus',    $.proxy(this.focus, this))\n        .on('blur',     $.proxy(this.blur, this))\n        .on('keypress', $.proxy(this.keypress, this))\n        .on('keyup',    $.proxy(this.keyup, this));\n\n      if (this.eventSupported('keydown')) {\n        this.$element.on('keydown', $.proxy(this.keydown, this));\n      }\n\n      this.$menu\n        .on('click', $.proxy(this.click, this))\n        .on('mouseenter', 'li', $.proxy(this.mouseenter, this))\n        .on('mouseleave', 'li', $.proxy(this.mouseleave, this));\n\n      this.$button\n        .on('click', $.proxy(this.toggle, this));\n    }\n\n  , eventSupported: function(eventName) {\n      var isSupported = eventName in this.$element;\n      if (!isSupported) {\n        this.$element.setAttribute(eventName, 'return;');\n        isSupported = typeof this.$element[eventName] === 'function';\n      }\n      return isSupported;\n    }\n\n  , move: function (e) {\n      if (!this.shown) {return;}\n\n      switch(e.keyCode) {\n        case 9: // tab\n        case 13: // enter\n        case 27: // escape\n          e.preventDefault();\n          break;\n\n        case 38: // up arrow\n          e.preventDefault();\n          this.prev();\n          this.fixMenuScroll();\n          break;\n\n        case 40: // down arrow\n          e.preventDefault();\n          this.next();\n          this.fixMenuScroll();\n          break;\n      }\n\n      e.stopPropagation();\n    }\n\n  , fixMenuScroll: function(){\n      var active = this.$menu.find('.active');\n      if(active.length){\n          var top = active.position().top;\n          var bottom = top + active.height();\n          var scrollTop = this.$menu.scrollTop();\n          var menuHeight = this.$menu.height();\n          if(bottom > menuHeight){\n              this.$menu.scrollTop(scrollTop + bottom - menuHeight);\n          } else if(top < 0){\n              this.$menu.scrollTop(scrollTop + top);\n          }\n      }\n  }\n\n  , keydown: function (e) {\n      this.suppressKeyPressRepeat = ~$.inArray(e.keyCode, [40,38,9,13,27]);\n      this.move(e);\n    }\n\n  , keypress: function (e) {\n      if (this.suppressKeyPressRepeat) {return;}\n      this.move(e);\n    }\n\n  , keyup: function (e) {\n      switch(e.keyCode) {\n        case 40: // down arrow\n         if (!this.shown){\n           this.toggle();\n         }\n         break;\n        case 39: // right arrow\n        case 38: // up arrow\n        case 37: // left arrow\n        case 36: // home\n        case 35: // end\n        case 16: // shift\n        case 17: // ctrl\n        case 18: // alt\n          break;\n\n        case 9: // tab\n        case 13: // enter\n          if (!this.shown) {return;}\n          this.select();\n          break;\n\n        case 27: // escape\n          if (!this.shown) {return;}\n          this.hide();\n          break;\n\n        default:\n          this.clearTarget();\n          this.lookup();\n      }\n\n      e.stopPropagation();\n      e.preventDefault();\n  }\n\n  , focus: function (e) {\n      this.focused = true;\n    }\n\n  , blur: function (e) {\n      var that = this;\n      this.focused = false;\n      var val = this.$element.val();\n      if (!this.selected && val !== '' ) {\n        this.$element.val('');\n        this.$source.val('').trigger('change');\n        this.$target.val('').trigger('change');\n      }\n      if (!this.mousedover && this.shown) {setTimeout(function () { that.hide(); }, 200);}\n    }\n\n  , click: function (e) {\n      e.stopPropagation();\n      e.preventDefault();\n      this.select();\n      this.$element.focus();\n    }\n\n  , mouseenter: function (e) {\n      this.mousedover = true;\n      this.$menu.find('.active').removeClass('active');\n      $(e.currentTarget).addClass('active');\n    }\n\n  , mouseleave: function (e) {\n      this.mousedover = false;\n    }\n  };\n\n  /* COMBOBOX PLUGIN DEFINITION\n   * =========================== */\n  $.fn.combobox = function ( option ) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('combobox')\n        , options = typeof option == 'object' && option;\n      if(!data) {$this.data('combobox', (data = new Combobox(this, options)));}\n      if (typeof option == 'string') {data[option]();}\n    });\n  };\n\n  $.fn.combobox.defaults = {\n    bsVersion: '3'\n  , menu: '<ul class=\"typeahead typeahead-long dropdown-menu\"></ul>'\n  , item: '<li><a href=\"#\"></a></li>'\n  };\n\n  $.fn.combobox.Constructor = Combobox;\n\n}( window.jQuery );\n"],"sourceRoot":"/source/"}