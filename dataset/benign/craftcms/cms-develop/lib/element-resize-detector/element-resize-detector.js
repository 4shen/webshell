!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).elementResizeDetectorMaker=e()}}(function(){return function r(a,s,l){function c(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(d)return d(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var o=s[t]={exports:{}};a[t][0].call(o.exports,function(e){return c(a[t][1][e]||e)},o,o.exports,r,a,s,l)}return s[t].exports}for(var d="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,n){"use strict";var c=e("./utils");function d(){var i={},n=0,o=0,r=0;return{add:function(e,t){t||(t=e,e=0),o<e?o=e:e<r&&(r=e),i[e]||(i[e]=[]),i[e].push(t),n++},process:function(){for(var e=r;e<=o;e++)for(var t=i[e],n=0;n<t.length;n++)(0,t[n])()},size:function(){return n}}}t.exports=function(e){var t=(e=e||{}).reporter,n=c.getOption(e,"async",!0),i=c.getOption(e,"auto",!0);i&&!n&&(t&&t.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),n=!0);var o,r=d(),a=!1;function s(){for(a=!0;r.size();){var e=r;r=d(),e.process()}a=!1}function l(){o=function(e){return function(e){return setTimeout(e,0)}(e)}(s)}return{add:function(e,t){!a&&i&&n&&0===r.size()&&l(),r.add(e,t)},force:function(e){a||(void 0===e&&(e=n),o&&(function(e){clearTimeout(e)}(o),o=null),e?l():s())}}}},{"./utils":2}],2:[function(e,t,n){"use strict";(t.exports={}).getOption=function(e,t,n){var i=e[t];return null!=i||void 0===n?i:n}},{}],3:[function(e,t,n){"use strict";var i=t.exports={};i.isIE=function(e){return(-1!==(t=navigator.userAgent.toLowerCase()).indexOf("msie")||-1!==t.indexOf("trident")||-1!==t.indexOf(" edge/"))&&(!e||e===function(){for(var e=3,t=document.createElement("div"),n=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",n[0];);return 4<e?e:void 0}());var t},i.isLegacyOpera=function(){return!!window.opera}},{}],4:[function(e,t,n){"use strict";(t.exports={}).forEach=function(e,t){for(var n=0;n<e.length;n++){var i=t(e[n]);if(i)return i}}},{}],5:[function(e,t,n){"use strict";var m=e("../browser-detector");t.exports=function(u){var f=(u=u||{}).reporter,h=u.batchProcessor,p=u.stateHandler.getState;if(!f)throw new Error("Missing required dependency: reporter.");function o(e){return p(e).object}return{makeDetectable:function(r,e,t){var n,i,o,a,s,l,c;function d(){function e(){if("static"===s.position){n.style.setProperty("position","relative",r.important?"important":"");var e=function(e,t,n,i){var o=n[i];"auto"!==o&&"0"!==o.replace(/[^-\d\.]/g,"")&&(e.warn("An element that is positioned static has style."+i+"="+o+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+i+" will be set to 0. Element: ",t),t.style.setProperty(i,"0",r.important?"important":""))};e(f,n,s,"top"),e(f,n,s,"right"),e(f,n,s,"bottom"),e(f,n,s,"left")}}""!==s.position&&(e(),a=!0);var t=document.createElement("object");t.style.cssText=o,t.tabIndex=-1,t.type="text/html",t.setAttribute("aria-hidden","true"),t.onload=function(){a||e(),function e(t,n){if(!t.contentDocument){var i=p(t);return i.checkForObjectDocumentTimeoutId&&window.clearTimeout(i.checkForObjectDocumentTimeoutId),void(i.checkForObjectDocumentTimeoutId=setTimeout(function(){i.checkForObjectDocumentTimeoutId=0,e(t,n)},100))}n(t.contentDocument)}(this,function(e){i(n)})},m.isIE()||(t.data="about:blank"),p(n)&&(n.appendChild(t),p(n).object=t,m.isIE()&&(t.data="about:blank"))}t||(t=e,e=r,r=null),(r=r||{}).debug,m.isIE(8)?t(e):(n=e,i=t,o=function(e){var t=u.important?" !important; ":"; ";return(e.join(t)+t).trim()}(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),a=!1,s=window.getComputedStyle(n),l=n.offsetWidth,c=n.offsetHeight,p(n).startSize={width:l,height:c},h?h.add(d):d())},addListener:function(e,t){function n(){t(e)}if(m.isIE(8))p(e).object={proxy:n},e.attachEvent("onresize",n);else{var i=o(e);if(!i)throw new Error("Element is not detectable by this strategy.");i.contentDocument.defaultView.addEventListener("resize",n)}},uninstall:function(e){if(p(e)){var t=o(e);t&&(m.isIE(8)?e.detachEvent("onresize",t.proxy):e.removeChild(t),p(e).checkForObjectDocumentTimeoutId&&window.clearTimeout(p(e).checkForObjectDocumentTimeoutId),delete p(e).object)}}}}},{"../browser-detector":3}],6:[function(e,t,n){"use strict";var j=e("../collection-utils").forEach;t.exports=function(n){var A=(n=n||{}).reporter,v=n.batchProcessor,D=n.stateHandler.getState,b=(n.stateHandler.hasState,n.idHandler);if(!v)throw new Error("Missing required dependency: batchProcessor");if(!A)throw new Error("Missing required dependency: reporter.");var z=function(){var e=document.createElement("div");e.style.cssText=H(["position: absolute","width: 1000px","height: 1000px","visibility: hidden","margin: 0","padding: 0"]);var t=document.createElement("div");t.style.cssText=H(["position: absolute","width: 500px","height: 500px","overflow: scroll","visibility: none","top: -1500px","left: -1500px","visibility: hidden","margin: 0","padding: 0"]),t.appendChild(e),document.body.insertBefore(t,document.body.firstChild);var n=500-t.clientWidth,i=500-t.clientHeight;return document.body.removeChild(t),{width:n,height:i}}(),T="erd_scroll_detection_container";function e(e){!function(i,o,e){if(!i.getElementById(o)){var t=e+"_animation",n=e+"_animation_active",r="/* Created by the element-resize-detector library. */\n";r+="."+e+" > div::-webkit-scrollbar { "+H(["display: none"])+" }\n\n",r+="."+n+" { "+H(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+t,"animation-name: "+t])+" }\n",r+="@-webkit-keyframes "+t+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\n",function(e,t){t=t||function(e){i.head.appendChild(e)};var n=i.createElement("style");n.innerHTML=e,n.id=o,t(n)}(r+="@keyframes "+t+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }")}}(e,"erd_scroll_detection_scrollbar_style",T)}function H(e){var t=n.important?" !important; ":"; ";return(e.join(t)+t).trim()}function L(e,t,n){if(e.addEventListener)e.addEventListener(t,n);else{if(!e.attachEvent)return A.error("[scroll] Don't know how to add event listeners.");e.attachEvent("on"+t,n)}}function i(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n);else{if(!e.detachEvent)return A.error("[scroll] Don't know how to remove event listeners.");e.detachEvent("on"+t,n)}}function y(e){return D(e).container.childNodes[0].childNodes[0].childNodes[0]}function w(e){return D(e).container.childNodes[0].childNodes[0].childNodes[1]}return e(window.document),{makeDetectable:function(x,E,e){function S(){if(x.debug){var e=Array.prototype.slice.call(arguments);if(e.unshift(b.get(E),"Scroll: "),A.log.apply)A.log.apply(null,e);else for(var t=0;t<e.length;t++)A.log(e[t])}}function o(e){var t=D(e).container.childNodes[0],n=window.getComputedStyle(t);return!n.width||-1===n.width.indexOf("px")}function t(){var e=window.getComputedStyle(E),t={};return t.position=e.position,t.width=E.offsetWidth,t.height=E.offsetHeight,t.top=e.top,t.right=e.right,t.bottom=e.bottom,t.left=e.left,t.widthCSS=e.width,t.heightCSS=e.height,t}function n(){if(S("storeStyle invoked."),D(E)){var e=t();D(E).style=e}else S("Aborting because element has been uninstalled")}function s(e,t,n){D(e).lastWidth=t,D(e).lastHeight=n}function c(){return 2*z.width+1}function d(){return 2*z.height+1}function u(e){return e+10+c()}function f(e){return e+10+d()}function l(e,t,n){var i=y(e),o=w(e),r=u(t),a=f(n),s=function(e){return 2*e+c()}(t),l=function(e){return 2*e+d()}(n);i.scrollLeft=r,i.scrollTop=a,o.scrollLeft=s,o.scrollTop=l}function k(){var e=D(E).container;if(!e){(e=document.createElement("div")).className=T,e.style.cssText=H(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),function(e){e.className+=" "+T+"_animation_active"}(D(E).container=e),E.appendChild(e);var t=function(){D(E).onRendered&&D(E).onRendered()};L(e,"animationstart",t),D(E).onAnimationStart=t}return e}function i(){if(S("Injecting elements"),D(E)){!function(){var e=D(E).style;if("static"===e.position){E.style.setProperty("position","relative",x.important?"important":"");var t=function(e,t,n,i){var o=n[i];"auto"!==o&&"0"!==o.replace(/[^-\d\.]/g,"")&&(e.warn("An element that is positioned static has style."+i+"="+o+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+i+" will be set to 0. Element: ",t),t.style[i]=0)};t(A,E,e,"top"),t(A,E,e,"right"),t(A,E,e,"bottom"),t(A,E,e,"left")}}();var e=D(E).container;e||(e=k());var t,n,i,o,r=z.width,a=z.height,s=H(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),l=H(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(["left: "+(t=(t=-(1+r))?t+"px":"0"),"top: "+(n=(n=-(1+a))?n+"px":"0"),"right: "+(o=(o=-r)?o+"px":"0"),"bottom: "+(i=(i=-a)?i+"px":"0")])),c=H(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),d=H(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),u=H(["position: absolute","left: 0","top: 0"]),f=H(["position: absolute","width: 200%","height: 200%"]),h=document.createElement("div"),p=document.createElement("div"),m=document.createElement("div"),g=document.createElement("div"),v=document.createElement("div"),b=document.createElement("div");h.dir="ltr",h.style.cssText=s,h.className=T,p.className=T,p.style.cssText=l,m.style.cssText=c,g.style.cssText=u,v.style.cssText=d,b.style.cssText=f,m.appendChild(g),v.appendChild(b),p.appendChild(m),p.appendChild(v),h.appendChild(p),e.appendChild(h),L(m,"scroll",y),L(v,"scroll",w),D(E).onExpandScroll=y,D(E).onShrinkScroll=w}else S("Aborting because element has been uninstalled");function y(){D(E).onExpand&&D(E).onExpand()}function w(){D(E).onShrink&&D(E).onShrink()}}function r(){function r(e,t,n){var i=function(e){return y(e).childNodes[0]}(e),o=u(t),r=f(n);i.style.setProperty("width",o+"px",x.important?"important":""),i.style.setProperty("height",r+"px",x.important?"important":"")}function n(e){var n=E.offsetWidth,i=E.offsetHeight,o=n!==D(E).lastWidth||i!==D(E).lastHeight;S("Storing current size",n,i),s(E,n,i),v.add(0,function(){if(o)if(D(E))if(a()){if(x.debug){var e=E.offsetWidth,t=E.offsetHeight;e===n&&t===i||A.warn(b.get(E),"Scroll: Size changed before updating detector elements.")}r(E,n,i)}else S("Aborting because element container has not been initialized");else S("Aborting because element has been uninstalled")}),v.add(1,function(){D(E)?a()?l(E,n,i):S("Aborting because element container has not been initialized"):S("Aborting because element has been uninstalled")}),o&&e&&v.add(2,function(){D(E)?a()?e():S("Aborting because element container has not been initialized"):S("Aborting because element has been uninstalled")})}function a(){return!!D(E).container}function i(){S("notifyListenersIfNeeded invoked");var e=D(E);return void 0===D(E).lastNotifiedWidth&&e.lastWidth===e.startSize.width&&e.lastHeight===e.startSize.height?S("Not notifying: Size is the same as the start size, and there has been no notification yet."):e.lastWidth===e.lastNotifiedWidth&&e.lastHeight===e.lastNotifiedHeight?S("Not notifying: Size already notified"):(S("Current size not notified, notifying..."),e.lastNotifiedWidth=e.lastWidth,e.lastNotifiedHeight=e.lastHeight,void j(D(E).listeners,function(e){e(E)}))}function e(){S("Scroll detected."),o(E)?S("Scroll event fired while unrendered. Ignoring..."):n(i)}if(S("registerListenersAndPositionElements invoked."),D(E)){D(E).onRendered=function(){if(S("startanimation triggered."),o(E))S("Ignoring since element is still unrendered...");else{S("Element rendered.");var e=y(E),t=w(E);0!==e.scrollLeft&&0!==e.scrollTop&&0!==t.scrollLeft&&0!==t.scrollTop||(S("Scrollbars out of sync. Updating detector elements..."),n(i))}},D(E).onExpand=e,D(E).onShrink=e;var t=D(E).style;r(E,t.width,t.height)}else S("Aborting because element has been uninstalled")}function a(){if(S("finalizeDomMutation invoked."),D(E)){var e=D(E).style;s(E,e.width,e.height),l(E,e.width,e.height)}else S("Aborting because element has been uninstalled")}function h(){e(E)}function p(){S("Installing..."),D(E).listeners=[],function(){var e=t();D(E).startSize={width:e.width,height:e.height},S("Element start size",D(E).startSize)}(),v.add(0,n),v.add(1,i),v.add(2,r),v.add(3,a),v.add(4,h)}var m,g;e||(e=E,E=x,x=null),x=x||{},S("Making detectable..."),(g=m=E)!==g.ownerDocument.body&&!g.ownerDocument.body.contains(g)||null===window.getComputedStyle(m)?(S("Element is detached"),k(),S("Waiting until element is attached..."),D(E).onRendered=function(){S("Element is now attached"),p()}):p()},addListener:function(e,t){if(!D(e).listeners.push)throw new Error("Cannot add listener to an element that is not detectable.");D(e).listeners.push(t)},uninstall:function(e){var t=D(e);t&&(t.onExpandScroll&&i(y(e),"scroll",t.onExpandScroll),t.onShrinkScroll&&i(w(e),"scroll",t.onShrinkScroll),t.onAnimationStart&&i(t.container,"animationstart",t.onAnimationStart),t.container&&e.removeChild(t.container))},initDocument:e}}},{"../collection-utils":4}],7:[function(e,t,n){"use strict";var w=e("./collection-utils").forEach,s=e("./element-utils"),l=e("./listener-handler"),c=e("./id-generator"),d=e("./id-handler"),u=e("./reporter"),f=e("./browser-detector"),x=e("batch-processor"),E=e("./state-handler"),S=e("./detection-strategy/object.js"),k=e("./detection-strategy/scroll.js");function A(e){return Array.isArray(e)||void 0!==e.length}function D(e){if(Array.isArray(e))return e;var t=[];return w(e,function(e){t.push(e)}),t}function z(e){return e&&1===e.nodeType}function T(e,t,n){var i=e[t];return null==i&&void 0!==n?n:i}t.exports=function(t){var n;if((t=t||{}).idHandler)n={get:function(e){return t.idHandler.get(e,!0)},set:t.idHandler.set};else{var e=c(),i=d({idGenerator:e,stateHandler:E});n=i}var h=t.reporter;h||(h=u(!1===h));var o=T(t,"batchProcessor",x({reporter:h})),p={};p.callOnAdd=!!T(t,"callOnAdd",!0),p.debug=!!T(t,"debug",!1);var m,g=l(n),v=s({stateHandler:E}),r=T(t,"strategy","object"),b=T(t,"important",!1),a={reporter:h,batchProcessor:o,stateHandler:E,idHandler:n,important:b};if("scroll"===r&&(f.isLegacyOpera()?(h.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),r="object"):f.isIE(9)&&(h.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),r="object")),"scroll"===r)m=k(a);else{if("object"!==r)throw new Error("Invalid strategy name: "+r);m=S(a)}var y={};return{listenTo:function(e,r,a){function s(t){var e=g.get(t);w(e,function(e){e(t)})}function l(e,t,n){g.add(t,n),e&&n(t)}if(a||(a=r,r=e,e={}),!r)throw new Error("At least one element required.");if(!a)throw new Error("Listener required.");if(z(r))r=[r];else{if(!A(r))return h.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");r=D(r)}var c=0,d=T(e,"callOnAdd",p.callOnAdd),u=T(e,"onReady",function(){}),f=T(e,"debug",p.debug);w(r,function(e){E.getState(e)||(E.initState(e),n.set(e));var o=n.get(e);if(f&&h.log("Attaching listener to element",o,e),!v.isDetectable(e))return f&&h.log(o,"Not detectable."),v.isBusy(e)?(f&&h.log(o,"System busy making it detectable"),l(d,e,a),y[o]=y[o]||[],void y[o].push(function(){++c===r.length&&u()})):(f&&h.log(o,"Making detectable..."),v.markBusy(e,!0),m.makeDetectable({debug:f,important:b},e,function(e){if(f&&h.log(o,"onElementDetectable"),E.getState(e)){v.markAsDetectable(e),v.markBusy(e,!1),m.addListener(e,s),l(d,e,a);var t=E.getState(e);if(t&&t.startSize){var n=e.offsetWidth,i=e.offsetHeight;t.startSize.width===n&&t.startSize.height===i||s(e)}y[o]&&w(y[o],function(e){e()})}else f&&h.log(o,"Element uninstalled before being detectable.");delete y[o],++c===r.length&&u()}));f&&h.log(o,"Already detecable, adding listener."),l(d,e,a),c++}),c===r.length&&u()},removeListener:g.removeListener,removeAllListeners:g.removeAllListeners,uninstall:function(e){if(!e)return h.error("At least one element is required.");if(z(e))e=[e];else{if(!A(e))return h.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");e=D(e)}w(e,function(e){g.removeAllListeners(e),m.uninstall(e),E.cleanState(e)})},initDocument:function(e){m.initDocument&&m.initDocument(e)}}}},{"./browser-detector":3,"./collection-utils":4,"./detection-strategy/object.js":5,"./detection-strategy/scroll.js":6,"./element-utils":8,"./id-generator":9,"./id-handler":10,"./listener-handler":11,"./reporter":12,"./state-handler":13,"batch-processor":1}],8:[function(e,t,n){"use strict";t.exports=function(e){var n=e.stateHandler.getState;return{isDetectable:function(e){var t=n(e);return t&&!!t.isDetectable},markAsDetectable:function(e){n(e).isDetectable=!0},isBusy:function(e){return!!n(e).busy},markBusy:function(e,t){n(e).busy=!!t}}}},{}],9:[function(e,t,n){"use strict";t.exports=function(){var e=1;return{generate:function(){return e++}}}},{}],10:[function(e,t,n){"use strict";t.exports=function(e){var i=e.idGenerator,o=e.stateHandler.getState;return{get:function(e){var t=o(e);return t&&void 0!==t.id?t.id:null},set:function(e){var t=o(e);if(!t)throw new Error("setId required the element to have a resize detection state.");var n=i.generate();return t.id=n}}}},{}],11:[function(e,t,n){"use strict";t.exports=function(i){var o={};function r(e){var t=i.get(e);return void 0===t?[]:o[t]||[]}return{get:r,add:function(e,t){var n=i.get(e);o[n]||(o[n]=[]),o[n].push(t)},removeListener:function(e,t){for(var n=r(e),i=0,o=n.length;i<o;++i)if(n[i]===t){n.splice(i,1);break}},removeAllListeners:function(e){var t=r(e);t&&(t.length=0)}}}},{}],12:[function(e,t,n){"use strict";t.exports=function(e){function t(){}var n={log:t,warn:t,error:t};if(!e&&window.console){var i=function(e,n){e[n]=function(){var e=console[n];if(e.apply)e.apply(console,arguments);else for(var t=0;t<arguments.length;t++)e(arguments[t])}};i(n,"log"),i(n,"warn"),i(n,"error")}return n}},{}],13:[function(e,t,n){"use strict";var i="_erd";function o(e){return e[i]}t.exports={initState:function(e){return e[i]={},o(e)},getState:o,cleanState:function(e){delete e[i]}}},{}]},{},[7])(7)});
//# sourceMappingURL=element-resize-detector.js.map
