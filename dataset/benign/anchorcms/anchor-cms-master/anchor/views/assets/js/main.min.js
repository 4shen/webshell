"use strict";var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _defineProperty2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}$(document).ready(function(){var e,t=0,n=function(){$("form").first().trigger("submit")};$(".autosave-action").click(function(){var r;null===e?e=setInterval(function(){++t>30&&(t=0,n()),$(".autosave-label").text("Autosave in "+(30-t))},1e3):(clearInterval(e),e=null,t=0),r=null!==e,$(".autosave-action").toggleClass("green",r),$(".autosave-action").toggleClass("autosave-on",r),$(".autosave-action").toggleClass("secondary",!r),$(".autosave-label").text(r?"Autosave in 30":"Autosave: Off")})}),function(e){e.fn.changeSaver=function(){var t=e(this),n=!1,r=[],i=arguments[0]||"input[type=text], textarea";t.find(i).forEach(function(t,n){r.push({element:t,original_value:e(t).val()})}),e(t).on("submit",function(){n=!0}),e(window).on("beforeunload",function(){if(!n&&function(){for(var t=0;t<r.length;t++){var n=r[t];if(n.original_value!=e(n.element).val())return!0}return!1}())return"There are unsaved changes"})}}(Zepto),$(function(){var e=$("#label-field"),t=$(".hide"),n=$("#label-type"),r=$("#pagetype"),i=function(){var n=e.val();t.hide(),"image"==n?t.show():"file"==n&&$(".attributes_type").show()};e.bind("change",i);n.bind("change",function(){"page"==n.val()?r.parent().show():(r.parent().hide(),r.val("all"))}),i()}),$(function(){var e=$(document),t=$("body"),n=$('<div id="upload-file"><span>Upload your file</span></div>'),r=["text/css","text/javascript","application/javascript","text/x-markdown","application/pdf","image/jpeg","image/gif","image/png","image/bmp"],i=function(e){return n.hide().removeClass("active"),e.preventDefault(),!1},o=function(e){var t=new FileReader;t.file=e,t.callback=a,t.onload=t.callback,t.readAsBinaryString(e)},a=function(){-1!==["text/x-markdown"].indexOf(this.file.type)&&$(".main textarea").val(this.result).trigger("keydown");-1!==["text/javascript","application/javascript"].indexOf(this.file.type)&&$("textarea[name=js]").val(this.result);-1!==["text/css"].indexOf(this.file.type)&&$("textarea[name=css]").val(this.result);if(-1!==["image/jpeg","image/gif","image/png","image/bmp","application/pdf"].indexOf(this.file.type)){var e,t=window.location.pathname,n=t.split("/");e="add"==n[n.length-1]?t.split("/").slice(0,-2).join("/")+"/upload":t.split("/").slice(0,-3).join("/")+"/upload",s(e,this.file)}},s=function(e,t){var n=new XMLHttpRequest;n.open("post",e);var r=new FormData;r.append("file",t),n.onreadystatechange=function(){if(4==this.readyState)return c(t,this.responseText)},n.upload?n.upload.onprogress=function(e){u(e.position||e.loaded,e.totalSize||e.total)}:n.addEventListener("progress",function(e){u(e.position||e.loaded,e.totalSize||e.total)},!1),n.send(r)},u=function(e,t){e==t?$("#upload-file-progress").hide():($("#upload-file-progress").show(),$("#upload-file-progress progress").prop("value",e),$("#upload-file-progress progress").prop("max",t))},c=function(e,t){var n=JSON.parse(t);if(n.uri){var r=$(".main textarea"),i=r[0],o=i.selectionStart,a=i.value,s="["+e.name+"]("+n.uri+")\n\n";s=-1!==["image/jpeg","image/gif","image/png","image/bmp"].indexOf(e.type)?"\n\n!"+s:"\n\n"+s,i.value=a.substring(0,o)+s+a.substring(o),i.selectionStart=i.selectionEnd=o+e.length,r.trigger("keydown")}};window.FileReader&&window.FileList&&window.File&&(e.on("dragover",function(e){return e.preventDefault(),n.show().addClass("active"),!1}),e.on("dragenter",i),e.on("drop",function(e){e.preventDefault();for(var t,i=e.target.files||e.dataTransfer.files,a=0;a<i.length;a++){var s=i.item(a);-1!==r.indexOf(s.type)?o(s):(t=s.type+" not supported",window.console&&console.log(t))}return n.hide().removeClass("active"),!1}),e.on("dragleave",i),e.on("dragexit",function(e){return e.preventDefault(),n.hide().removeClass("active"),!1}),t.append(n),t.append('<div id="upload-file-progress"><progress value="0"></progress></div>'))}),function(e){e.fn.editor=function(){var t=arguments[1]||{},n=(e.extend({},{},t),e(this)),r=n.parent(),i=function(e,t){var r=n[0],i=r.selectionStart,o=r.selectionEnd,a=r.value;r.value=a.substring(0,i)+e+a.substring(i,o)+t+a.substring(o),r.selectionStart=o+e.length+t.length},o={bold:function(){i("**","**")},italic:function(){i("*","*")},code:function(){var e="`",t=n[0],r=t.selectionStart,o=t.selectionEnd,a=t.value.substring(r,o);/\n+.*/gm.test(a)&&(e="\n```\n"),i(e,e)},link:function(){var e=n[0],t=e.selectionStart,r=e.selectionEnd,i=e.value,o=i.substring(t,r),a="["+o+"]("+o+")";e.value=i.substring(0,t)+a+i.substring(r),e.selectionStart=e.selectionEnd=r+a.length},list:function(){for(var e=n[0],t=e.selectionStart,r=e.selectionEnd,i=e.value,o=i.substring(t,r).split("\n"),a=0;a<o.length;a++)o[a]="* "+o[a];e.value=i.substring(0,t)+"\n"+o.join("\n")+"\n"+i.substring(r)},quote:function(){for(var e=n[0],t=e.selectionStart,r=e.selectionEnd,i=e.value,o=i.substring(t,r).split("\n"),a=0;a<o.length;a++)o[a]="> "+o[a];e.value=i.substring(0,t)+o.join("\n")+i.substring(r)}};n.on("keydown",function(e){9===e.keyCode&&(e.preventDefault(),e.stopPropagation(),e.shiftKey&&9===e.keyCode?function(e){var t=n[0],r=t.selectionStart,i=t.selectionEnd,o=t.value,a=new RegExp(/^[\t]{1}/),s=0;if(r==i){for(;r>0;){if("\n"==o.charAt(r)){r++;break}r--}var u=o.substring(r,i);u.match(a)&&(t.value=o.substring(0,r)+u.replace(a,"")+o.substring(i),i--),t.selectionStart=t.selectionEnd=i}else{for(var c=o.substring(r,i).split("\n"),f=0;f<c.length;f++)c[f].match(a)&&(s++,c[f]=c[f].replace(a,""));t.value=o.substring(0,r)+c.join("\n")+o.substring(i),t.selectionStart=r,t.selectionEnd=i-s}}():function(e){for(var t=n[0],r=t.selectionStart,i=t.selectionEnd,o=t.value,a=o.substring(r,i).split("\n"),s=0;s<a.length;s++)a[s]="\t"+a[s];t.value=o.substring(0,r)+a.join("\n")+o.substring(i),i>r?(t.selectionStart=r,t.selectionEnd=i+a.length):t.selectionStart=t.selectionEnd=r+1}())}),r.on("click","nav a",function(t){var n=e(t.target).attr("href").split("#").pop();return o[n]&&o[n](),!1})}}(Zepto),function(e){var t=e(document),n=e("form").first(),r=n.find("button[type=submit]"),i=r.html(),o=r.data("loading"),a=(e(".top nav .active a"),e(".header .wrap")),s=e(".notifications"),u=document.title;t.on("keydown",function(e){if(e.ctrlKey&&83==e.keyCode&&!e.altKey)return n.trigger("submit"),!1}),n.on("submit",function(){var t={};e.each(e(this).serializeArray(),function(e,n){t[n.name]=n.value});var c=e(".autosave-action").hasClass("autosave-on");return t.autosave=c,r.prop("disabled",!0).css("cursor","wait").html(o),o&&(document.title=o),e.ajax({url:n.attr("action"),type:"POST",data:t,success:function(t,n,o){if((t=JSON.parse(t)).notification){document.title=t.notification;var a=e('<p class="success">'+t.notification+"</p>");s.append(a),setTimeout(function(){a.animate({opacity:0},600,"ease-out",function(){e(this).remove()})},3e3)}else if(t.errors)for(index in t.errors){var c=t.errors[index];a=e('<p class="error">'+c+"</p>");s.append(a),setTimeout(function(){a.animate({opacity:0},600,"ease-out",function(){e(this).remove()})},3e3)}t.redirect&&t.redirect!=window.location.href?setTimeout(function(){window.location.href=t.redirect},1e3):setTimeout(function(){document.title=u},3e3),r.prop("disabled",!1).html(i).removeAttr("style")},error:function(t,n,o){var s=e('<div class="notifications"><p class="error">Error</p></div>');a.prepend(s),setTimeout(function(){s.animate({opacity:0},600,"ease-out",function(){e(this).remove()}),document.title=u},3e3),r.prop("disabled",!1).html(i).removeAttr("style")}}),!1})}(Zepto),$(function(){var e=$(document),t=$("html"),n=t.children("body"),r={target:$("textarea[name=html], textarea[name=content]"),exitSpan:"#exit-focus",enter:function(){t.addClass("focus"),n.children(r.exitSpan).length||n.append('<span class="btn" id="'+r.exitSpan.substr(1)+'">Exit focus mode (ESC)</span>'),n.children(r.exitSpan).css("opacity",0).animate({opacity:1},250),r.target.placeholder=(r.target.placeholder||"").split(".")[0]+"."},exit:function(){n.children(r.exitSpan).animate({opacity:0},250),t.removeClass("focus")}};r.target.focus(r.enter).blur(r.exit),e.on("keyup",function(e){70==e.keyCode&&r.enter(),27==e.keyCode&&r.exit()})});var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)};function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}$(document).ready(function(){var e,t=0,n=function(){$("form").first().trigger("submit")};$(".autosave-action").click(function(){var r;null===e?e=setInterval(function(){++t>30&&(t=0,n()),$(".autosave-label").text("Autosave in "+(30-t))},1e3):(clearInterval(e),e=null,t=0),r=null!==e,$(".autosave-action").toggleClass("green",r),$(".autosave-action").toggleClass("autosave-on",r),$(".autosave-action").toggleClass("secondary",!r),$(".autosave-label").text(r?"Autosave in 30":"Autosave: Off")})}),function(e){e.fn.changeSaver=function(){var t=e(this),n=!1,r=[],i=arguments[0]||"input[type=text], textarea";t.find(i).forEach(function(t,n){r.push({element:t,original_value:e(t).val()})}),e(t).on("submit",function(){n=!0}),e(window).on("beforeunload",function(){if(!n&&function(){for(var t=0;t<r.length;t++){var n=r[t];if(n.original_value!=e(n.element).val())return!0}return!1}())return"There are unsaved changes"})}}(Zepto),$(function(){var e=$("#label-field"),t=$(".hide"),n=$("#label-type"),r=$("#pagetype"),i=function(){var n=e.val();t.hide(),"image"==n?t.show():"file"==n&&$(".attributes_type").show()};e.bind("change",i);n.bind("change",function(){"page"==n.val()?r.parent().show():(r.parent().hide(),r.val("all"))}),i()}),$(function(){var e=$(document),t=$("body"),n=$('<div id="upload-file"><span>Upload your file</span></div>'),r=["text/css","text/javascript","application/javascript","text/x-markdown","application/pdf","image/jpeg","image/gif","image/png","image/bmp"],i=function(e){return n.hide().removeClass("active"),e.preventDefault(),!1},o=function(e){var t=new FileReader;t.file=e,t.callback=a,t.onload=t.callback,t.readAsBinaryString(e)},a=function(){-1!==["text/x-markdown"].indexOf(this.file.type)&&$(".main textarea").val(this.result).trigger("keydown");-1!==["text/javascript","application/javascript"].indexOf(this.file.type)&&$("textarea[name=js]").val(this.result);-1!==["text/css"].indexOf(this.file.type)&&$("textarea[name=css]").val(this.result);if(-1!==["image/jpeg","image/gif","image/png","image/bmp","application/pdf"].indexOf(this.file.type)){var e,t=window.location.pathname,n=t.split("/");e="add"==n[n.length-1]?t.split("/").slice(0,-2).join("/")+"/upload":t.split("/").slice(0,-3).join("/")+"/upload",s(e,this.file)}},s=function(e,t){var n=new XMLHttpRequest;n.open("post",e);var r=new FormData;r.append("file",t),n.onreadystatechange=function(){if(4==this.readyState)return c(t,this.responseText)},n.upload?n.upload.onprogress=function(e){u(e.position||e.loaded,e.totalSize||e.total)}:n.addEventListener("progress",function(e){u(e.position||e.loaded,e.totalSize||e.total)},!1),n.send(r)},u=function(e,t){e==t?$("#upload-file-progress").hide():($("#upload-file-progress").show(),$("#upload-file-progress progress").prop("value",e),$("#upload-file-progress progress").prop("max",t))},c=function(e,t){var n=JSON.parse(t);if(n.uri){var r=$(".main textarea"),i=r[0],o=i.selectionStart,a=i.value,s="["+e.name+"]("+n.uri+")\n\n";s=-1!==["image/jpeg","image/gif","image/png","image/bmp"].indexOf(e.type)?"\n\n!"+s:"\n\n"+s,i.value=a.substring(0,o)+s+a.substring(o),i.selectionStart=i.selectionEnd=o+e.length,r.trigger("keydown")}};window.FileReader&&window.FileList&&window.File&&(e.on("dragover",function(e){return e.preventDefault(),n.show().addClass("active"),!1}),e.on("dragenter",i),e.on("drop",function(e){e.preventDefault();for(var t,i=e.target.files||e.dataTransfer.files,a=0;a<i.length;a++){var s=i.item(a);-1!==r.indexOf(s.type)?o(s):(t=s.type+" not supported",window.console&&console.log(t))}return n.hide().removeClass("active"),!1}),e.on("dragleave",i),e.on("dragexit",function(e){return e.preventDefault(),n.hide().removeClass("active"),!1}),t.append(n),t.append('<div id="upload-file-progress"><progress value="0"></progress></div>'))}),function(e){e.fn.editor=function(){var t=arguments[1]||{},n=(e.extend({},{},t),e(this)),r=n.parent(),i=function(e,t){var r=n[0],i=r.selectionStart,o=r.selectionEnd,a=r.value;r.value=a.substring(0,i)+e+a.substring(i,o)+t+a.substring(o),r.selectionStart=o+e.length+t.length},o={bold:function(){i("**","**")},italic:function(){i("*","*")},code:function(){var e="`",t=n[0],r=t.selectionStart,o=t.selectionEnd,a=t.value.substring(r,o);/\n+.*/gm.test(a)&&(e="\n```\n"),i(e,e)},link:function(){var e=n[0],t=e.selectionStart,r=e.selectionEnd,i=e.value,o=i.substring(t,r),a="["+o+"]("+o+")";e.value=i.substring(0,t)+a+i.substring(r),e.selectionStart=e.selectionEnd=r+a.length},list:function(){for(var e=n[0],t=e.selectionStart,r=e.selectionEnd,i=e.value,o=i.substring(t,r).split("\n"),a=0;a<o.length;a++)o[a]="* "+o[a];e.value=i.substring(0,t)+"\n"+o.join("\n")+"\n"+i.substring(r)},quote:function(){for(var e=n[0],t=e.selectionStart,r=e.selectionEnd,i=e.value,o=i.substring(t,r).split("\n"),a=0;a<o.length;a++)o[a]="> "+o[a];e.value=i.substring(0,t)+o.join("\n")+i.substring(r)}};n.on("keydown",function(e){9===e.keyCode&&(e.preventDefault(),e.stopPropagation(),e.shiftKey&&9===e.keyCode?function(e){var t=n[0],r=t.selectionStart,i=t.selectionEnd,o=t.value,a=new RegExp(/^[\t]{1}/),s=0;if(r==i){for(;r>0;){if("\n"==o.charAt(r)){r++;break}r--}var u=o.substring(r,i);u.match(a)&&(t.value=o.substring(0,r)+u.replace(a,"")+o.substring(i),i--),t.selectionStart=t.selectionEnd=i}else{for(var c=o.substring(r,i).split("\n"),f=0;f<c.length;f++)c[f].match(a)&&(s++,c[f]=c[f].replace(a,""));t.value=o.substring(0,r)+c.join("\n")+o.substring(i),t.selectionStart=r,t.selectionEnd=i-s}}():function(e){for(var t=n[0],r=t.selectionStart,i=t.selectionEnd,o=t.value,a=o.substring(r,i).split("\n"),s=0;s<a.length;s++)a[s]="\t"+a[s];t.value=o.substring(0,r)+a.join("\n")+o.substring(i),i>r?(t.selectionStart=r,t.selectionEnd=i+a.length):t.selectionStart=t.selectionEnd=r+1}())}),r.on("click","nav a",function(t){var n=e(t.target).attr("href").split("#").pop();return o[n]&&o[n](),!1})}}(Zepto),function(e){var t=e(document),n=e("form").first(),r=n.find("button[type=submit]"),i=r.html(),o=r.data("loading"),a=(e(".top nav .active a"),e(".header .wrap")),s=e(".notifications"),u=document.title;t.on("keydown",function(e){if(e.ctrlKey&&83==e.keyCode&&!e.altKey)return n.trigger("submit"),!1}),n.on("submit",function(){var t={};e.each(e(this).serializeArray(),function(e,n){t[n.name]=n.value});var c=e(".autosave-action").hasClass("autosave-on");return t.autosave=c,r.prop("disabled",!0).css("cursor","wait").html(o),o&&(document.title=o),e.ajax({url:n.attr("action"),type:"POST",data:t,success:function(t,n,o){if((t=JSON.parse(t)).notification){document.title=t.notification;var a=e('<p class="success">'+t.notification+"</p>");s.append(a),setTimeout(function(){a.animate({opacity:0},600,"ease-out",function(){e(this).remove()})},3e3)}else if(t.errors)for(index in t.errors){var c=t.errors[index];a=e('<p class="error">'+c+"</p>");s.append(a),setTimeout(function(){a.animate({opacity:0},600,"ease-out",function(){e(this).remove()})},3e3)}t.redirect&&t.redirect!=window.location.href?setTimeout(function(){window.location.href=t.redirect},1e3):setTimeout(function(){document.title=u},3e3),r.prop("disabled",!1).html(i).removeAttr("style")},error:function(t,n,o){var s=e('<div class="notifications"><p class="error">Error</p></div>');a.prepend(s),setTimeout(function(){s.animate({opacity:0},600,"ease-out",function(){e(this).remove()}),document.title=u},3e3),r.prop("disabled",!1).html(i).removeAttr("style")}}),!1})}(Zepto),$(function(){var e=$(document),t=$("html"),n=t.children("body"),r={target:$("textarea[name=html], textarea[name=content]"),exitSpan:"#exit-focus",enter:function(){t.addClass("focus"),n.children(r.exitSpan).length||n.append('<span class="btn" id="'+r.exitSpan.substr(1)+'">Exit focus mode (ESC)</span>'),n.children(r.exitSpan).css("opacity",0).animate({opacity:1},250),r.target.placeholder=(r.target.placeholder||"").split(".")[0]+"."},exit:function(){n.children(r.exitSpan).animate({opacity:0},250),t.removeClass("focus")}};r.target.focus(r.enter).blur(r.exit),e.on("keyup",function(e){70==e.keyCode&&r.enter(),27==e.keyCode&&r.exit()})}),$(function(e,t){e=$("input[name=title]"),t=$("input[name=name]");var n=!1;t.bind("keyup",function(){n=!0}),e.bind("keyup",function(){n||t.val(e.val())})}),$(function(){var e=$("fieldset.redirect"),t=$("input[name=redirect]");$("button.secondary.redirector").bind("click",function(){return e.toggleClass("show"),e.hasClass("show")?t.removeAttr("tabindex"):t.attr("tabindex","-1"),!1}),t.change(function(){""===t.val()&&e.removeClass("show")}),""!==t.val()&&e.addClass("show"),t.hasClass("show")||t.attr("tabindex",-1)}),$(function(){var e=$("input[name=title]"),t=$("input[name=slug]"),n=t.val(),r=function(e){var t;e=String(e);_defineProperty(t={"©":"(c)","Á":"A","á":"a","À":"A","à":"a","Â":"A","â":"a","Å":"A","å":"a","Ä":"Ae","ä":"ae","Ã":"A","ã":"a","Ą":"A","ą":"a","Ā":"A","ā":"a","Æ":"AE","æ":"ae","Ć":"C","ć":"c","Č":"C","č":"c","Ç":"C","ç":"c","Ď":"D","ď":"d","Ð":"D","ð":"d","É":"E","é":"e","È":"E","è":"e","Ê":"E","ê":"e","Ě":"E","ě":"e","Ë":"E","ë":"e","Ę":"e","ę":"e","Ē":"E","ē":"e","Ğ":"G","ğ":"g","Ģ":"G","ģ":"g","Í":"I","í":"i","Ì":"I","ì":"i","Î":"I","î":"i","Ï":"I","ï":"i","İ":"I","Ī":"i","ī":"i","ı":"i","Ķ":"k","ķ":"k","Ļ":"L","ļ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ň":"N","ň":"n","Ñ":"N","ñ":"n","Ņ":"N","ņ":"n","Ó":"O"},"Ó","o"),_defineProperty(t,"ó","o"),_defineProperty(t,"Ò","O"),_defineProperty(t,"ò","o"),_defineProperty(t,"Ô","O"),_defineProperty(t,"ô","o"),_defineProperty(t,"Ö","Oe"),_defineProperty(t,"ö","oe"),_defineProperty(t,"Ő","O"),_defineProperty(t,"ő","o"),_defineProperty(t,"Õ","O"),_defineProperty(t,"õ","o"),_defineProperty(t,"Ø","O"),_defineProperty(t,"ø","o"),_defineProperty(t,"Ř","R"),_defineProperty(t,"ř","r"),_defineProperty(t,"Ś","S"),_defineProperty(t,"ś","s"),_defineProperty(t,"Š","S"),_defineProperty(t,"š","s"),_defineProperty(t,"Ş","S"),_defineProperty(t,"ş","s"),_defineProperty(t,"ß","ss"),_defineProperty(t,"Ť","T"),_defineProperty(t,"ť","t"),_defineProperty(t,"Ú","U"),_defineProperty(t,"ú","u"),_defineProperty(t,"Ù","U"),_defineProperty(t,"ù","u"),_defineProperty(t,"Û","U"),_defineProperty(t,"û","u"),_defineProperty(t,"Ů","U"),_defineProperty(t,"ů","u"),_defineProperty(t,"Ü","Ue"),_defineProperty(t,"ü","ue"),_defineProperty(t,"Ű","U"),_defineProperty(t,"ű","u"),_defineProperty(t,"Ū","u"),_defineProperty(t,"ū","u"),_defineProperty(t,"Ý","Y"),_defineProperty(t,"ý","y"),_defineProperty(t,"ÿ","y"),_defineProperty(t,"Ź","Z"),_defineProperty(t,"ź","z"),_defineProperty(t,"Ž","Z"),_defineProperty(t,"ž","z"),_defineProperty(t,"Ż","Z"),_defineProperty(t,"ż","z"),_defineProperty(t,"Þ","TH"),_defineProperty(t,"þ","th"),_defineProperty(t,"Α","A"),_defineProperty(t,"α","a"),_defineProperty(t,"Ά","A"),_defineProperty(t,"ά","a"),_defineProperty(t,"Β","B"),_defineProperty(t,"β","b"),_defineProperty(t,"Γ","G"),_defineProperty(t,"γ","g"),_defineProperty(t,"Δ","D"),_defineProperty(t,"δ","d"),_defineProperty(t,"Ε","E"),_defineProperty(t,"ε","e"),_defineProperty(t,"Έ","E"),_defineProperty(t,"έ","e"),_defineProperty(t,"Ζ","Z"),_defineProperty(t,"ζ","z"),_defineProperty(t,"Η","H"),_defineProperty(t,"η","h"),_defineProperty(t,"Ή","H"),_defineProperty(t,"ή","h"),_defineProperty(t,"Θ","8"),_defineProperty(t,"θ","8"),_defineProperty(t,"Ι","I"),_defineProperty(t,"ι","i"),_defineProperty(t,"Ί","I"),_defineProperty(t,"ί","i"),_defineProperty(t,"Ϊ","I"),_defineProperty(t,"ϊ","i"),_defineProperty(t,"ΐ","i"),_defineProperty(t,"Κ","K"),_defineProperty(t,"κ","k"),_defineProperty(t,"Λ","L"),_defineProperty(t,"λ","l"),_defineProperty(t,"Μ","M"),_defineProperty(t,"μ","m"),_defineProperty(t,"Ν","N"),_defineProperty(t,"ν","n"),_defineProperty(t,"Ξ","3"),_defineProperty(t,"ξ","3"),_defineProperty(t,"Ο","O"),_defineProperty(t,"ο","o"),_defineProperty(t,"Ό","O"),_defineProperty(t,"ό","o"),_defineProperty(t,"Π","P"),_defineProperty(t,"π","p"),_defineProperty(t,"Ρ","R"),_defineProperty(t,"ρ","r"),_defineProperty(t,"Σ","S"),_defineProperty(t,"ς","s"),_defineProperty(t,"σ","s"),_defineProperty(t,"Τ","T"),_defineProperty(t,"τ","t"),_defineProperty(t,"Υ","Y"),_defineProperty(t,"υ","y"),_defineProperty(t,"Ύ","Y"),_defineProperty(t,"ύ","y"),_defineProperty(t,"Ϋ","Y"),_defineProperty(t,"ϋ","y"),_defineProperty(t,"ΰ","y"),_defineProperty(t,"Φ","F"),_defineProperty(t,"φ","f"),_defineProperty(t,"Χ","X"),_defineProperty(t,"χ","x"),_defineProperty(t,"Ψ","PS"),_defineProperty(t,"ψ","ps"),_defineProperty(t,"Ω","W"),_defineProperty(t,"ω","w"),_defineProperty(t,"Ώ","W"),_defineProperty(t,"ώ","w"),_defineProperty(t,"А","A"),_defineProperty(t,"а","a"),_defineProperty(t,"Б","B"),_defineProperty(t,"б","b"),_defineProperty(t,"В","V"),_defineProperty(t,"в","v"),_defineProperty(t,"Г","G"),_defineProperty(t,"г","g"),_defineProperty(t,"Ґ","G"),_defineProperty(t,"Д","D"),_defineProperty(t,"д","d"),_defineProperty(t,"Е","E"),_defineProperty(t,"е","e"),_defineProperty(t,"Ё","Yo"),_defineProperty(t,"ё","yo"),_defineProperty(t,"Є","Ye"),_defineProperty(t,"є","ye"),_defineProperty(t,"Ж","Zh"),_defineProperty(t,"ж","zh"),_defineProperty(t,"З","Z"),_defineProperty(t,"з","z"),_defineProperty(t,"И","I"),_defineProperty(t,"и","i"),_defineProperty(t,"І","I"),_defineProperty(t,"і","i"),_defineProperty(t,"Ї","Yi"),_defineProperty(t,"ї","yi"),_defineProperty(t,"Й","J"),_defineProperty(t,"й","j"),_defineProperty(t,"К","K"),_defineProperty(t,"к","k"),_defineProperty(t,"Л","L"),_defineProperty(t,"л","l"),_defineProperty(t,"М","M"),_defineProperty(t,"м","m"),_defineProperty(t,"Н","N"),_defineProperty(t,"н","n"),_defineProperty(t,"О","O"),_defineProperty(t,"о","o"),_defineProperty(t,"П","P"),_defineProperty(t,"п","p"),_defineProperty(t,"Р","R"),_defineProperty(t,"р","r"),_defineProperty(t,"С","S"),_defineProperty(t,"с","s"),_defineProperty(t,"Т","T"),_defineProperty(t,"т","t"),_defineProperty(t,"У","U"),_defineProperty(t,"у","u"),_defineProperty(t,"Ф","F"),_defineProperty(t,"ф","f"),_defineProperty(t,"Х","H"),_defineProperty(t,"х","h"),_defineProperty(t,"Ц","C"),_defineProperty(t,"ц","c"),_defineProperty(t,"Ч","Ch"),_defineProperty(t,"ч","ch"),_defineProperty(t,"Ш","Sh"),_defineProperty(t,"ш","sh"),_defineProperty(t,"Щ","Sh"),_defineProperty(t,"щ","sh"),_defineProperty(t,"Ы","Y"),_defineProperty(t,"ы","y"),_defineProperty(t,"Э","E"),_defineProperty(t,"э","e"),_defineProperty(t,"Ю","Yu"),_defineProperty(t,"ю","yu"),_defineProperty(t,"Я","Ya"),_defineProperty(t,"я","ya");for(var n=["À","Á","Â","Ã","Ä","Å","Æ","Ç","È","É","Ê","Ë","Ì","Í","Î","Ï","Ð","Ñ","Ò","Ó","Ô","Õ","Ö","Ø","Ù","Ú","Û","Ü","Ý","ß","à","á","â","ã","ä","å","æ","ç","è","é","ê","ë","ì","í","î","ï","ñ","ò","ó","ô","õ","ö","ø","ù","ú","û","ü","ý","ÿ","Ā","ā","Ă","ă","Ą","ą","Ć","ć","Ĉ","ĉ","Ċ","ċ","Č","č","Ď","ď","Đ","đ","Ē","ē","Ĕ","ĕ","Ė","ė","Ę","ę","Ě","ě","Ĝ","ĝ","Ğ","ğ","Ġ","ġ","Ģ","ģ","Ĥ","ĥ","Ħ","ħ","Ĩ","ĩ","Ī","ī","Ĭ","ĭ","Į","į","İ","ı","Ĳ","ĳ","Ĵ","ĵ","Ķ","ķ","Ĺ","ĺ","Ļ","ļ","Ľ","ľ","Ŀ","ŀ","Ł","ł","Ń","ń","Ņ","ņ","Ň","ň","ŉ","Ō","ō","Ŏ","ŏ","Ő","ő","Œ","œ","Ŕ","ŕ","Ŗ","ŗ","Ř","ř","Ś","ś","Ŝ","ŝ","Ş","ş","Š","š","Ţ","ţ","Ť","ť","Ŧ","ŧ","Ũ","ũ","Ū","ū","Ŭ","ŭ","Ů","ů","Ű","ű","Ų","ų","Ŵ","ŵ","Ŷ","ŷ","Ÿ","Ź","ź","Ż","ż","Ž","ž","ſ","ƒ","Ơ","ơ","Ư","ư","Ǎ","ǎ","Ǐ","ǐ","Ǒ","ǒ","Ǔ","ǔ","Ǖ","ǖ","Ǘ","ǘ","Ǚ","ǚ","Ǜ","ǜ","Ǻ","ǻ","Ǽ","ǽ","Ǿ","ǿ","·","/","_",",",":",";"],r=["A","A","A","A","A","A","AE","C","E","E","E","E","I","I","I","I","D","N","O","O","O","O","O","O","U","U","U","U","Y","s","a","a","a","a","a","a","ae","c","e","e","e","e","i","i","i","i","n","o","o","o","o","o","o","u","u","u","u","y","y","A","a","A","a","A","a","C","c","C","c","C","c","C","c","D","d","D","d","E","e","E","e","E","e","E","e","E","e","G","g","G","g","G","g","G","g","H","h","H","h","I","i","I","i","I","i","I","i","I","i","IJ","ij","J","j","K","k","L","l","L","l","L","l","L","l","l","l","N","n","N","n","N","n","n","O","o","O","o","O","o","OE","oe","R","r","R","r","R","r","S","s","S","s","S","s","S","s","T","t","T","t","T","t","U","u","U","u","U","u","U","u","U","u","U","u","W","w","Y","y","Y","Z","z","Z","z","Z","z","s","f","O","o","U","u","A","a","I","i","O","o","U","u","U","u","U","u","U","u","U","u","A","a","AE","ae","O","o","-","-","-","-","-","-"],i=0;i<n.length;i++)e=e.replace(new RegExp(n[i],"g"),r[i]);return e.toLowerCase().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")};t.bind("focus",function(){t.val(),n=t.val()}),t.bind("blur",function(){""==t.val()?t.val(r(e.val())):t.val(r(t.val()))}),e.bind("keyup",function(){""==n&&t.val(r(e.val()))})}),function(e){e.fn.sortable=function(t){var n,r=e.extend({},{element:"li",dropped:function(){}},t),i=e(this).find(r.element);i.on("dragstart",function(t){e(this).addClass("moving"),n=this,t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/html",this.innerHTML)}),i.on("dragenter",function(){e(this).addClass("over")}),i.on("dragover",function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="move"}),i.on("dragleave",function(){e(this).removeClass("over")}),i.on("drop",function(e){e.preventDefault(),e.stopPropagation(),n!=this&&(n.innerHTML=this.innerHTML,this.innerHTML=e.dataTransfer.getData("text/html")),r.dropped()}),i.on("dragend",function(){e(this).removeClass("moving"),i.removeClass("over")})}}(Zepto),$(function(){var e=$("textarea").first();function t(t){var n=window.pageYOffset;e.height(e.prop("scrollHeight")+"px"),window.scrollTo(0,n)}e.on("change",t),e.on("cut paste drop keydown",function(e){window.setTimeout(function(){t()},0)}),e.focus(),e.select(),t()}),$(function(){if(window.XMLHttpRequest)var e=new XMLHttpRequest;else if(window.ActiveXObject)try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}$("input[type=file]").bind("change",function(){var e=$(this);e.parent().parent().find(".current-file").html(e.val().replace(/\\/g,"/").replace(/.*\//,""));new FormData;for(var n=this.files,r=0;r<n.length;r++){var i=n[r];if(-1!==["image/jpeg","image/gif","image/png","image/bmp","application/pdf"].indexOf(i.type)){var o=window.location.pathname,a=o.split("/");if("add"==a[a.length-1])var s=o.split("/").slice(0,-2).join("/")+"/upload";else s=o.split("/").slice(0,-3).join("/")+"/upload";t(s,i,this)}}});var t=function(t,n,r){e.open("post",t);var i=new FormData;i.append("file",n),e.onreadystatechange=function(){if(4==this.readyState){console.log("Uploaded");var e=JSON.parse(this.responseText);console.log(e),$(r).parent().append('<input type="hidden" name="'+$(r).attr("name")+'" value="'+e.uri+'">')}},e.upload?e.upload.onprogress=function(e){console.log(e.position+":"+e.total)}:e.addEventListener("progress",function(e){console.log(e.position+":"+e.total)},!1),e.send(i)}}),function(e){String.prototype.trim===e&&(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Array.prototype.reduce===e&&(Array.prototype.reduce=function(t){if(null==this)throw new TypeError;var n,r=Object(this),i=r.length>>>0,o=0;if("function"!=typeof t)throw new TypeError;if(0==i&&1==arguments.length)throw new TypeError;if(arguments.length>=2)n=arguments[1];else for(;;){if(o in r){n=r[o++];break}if(++o>=i)throw new TypeError}for(;o<i;)o in r&&(n=t.call(e,n,r[o],o,r)),o++;return n})}();var Zepto=function(){function e(e){return"[object Function]"==N.call(e)}function t(e){return e instanceof Object}function n(t){var n,r;if("[object Object]"!==N.call(t))return!1;if(!(r=e(t.constructor)&&t.constructor.prototype)||!hasOwnProperty.call(r,"isPrototypeOf"))return!1;for(n in t);return n===l||hasOwnProperty.call(t,n)}function r(e){return e instanceof Array}function i(e){return"number"==typeof e.length}function o(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function a(e){return e in b?b[e]:b[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function s(e,t){return"number"!=typeof t||x[o(e)]?t:t+"px"}function u(e,t){return t===l?d(e):d(e).filter(t)}function c(t,n,r,i){return e(n)?n.call(t,r,i):n}function f(e,t){for(var n in t(e),e.childNodes)f(e.childNodes[n],t)}var l,p,d,h,y,v,g=[],m=g.slice,P=window.document,_={},b={},w=P.defaultView.getComputedStyle,x={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},E=/^\s*<(\w+|!)[^>]*>/,S=[1,3,8,9,11],T=P.createElement("table"),O=P.createElement("tr"),C={tr:P.createElement("tbody"),tbody:T,thead:T,tfoot:T,td:O,th:O,"*":P.createElement("div")},j=/complete|loaded|interactive/,$=/^\.([\w-]+)$/,A=/^#([\w-]+)$/,k=/^[\w-]+$/,N={}.toString,L={},U=P.createElement("div");return L.matches=function(e,t){if(!e||1!==e.nodeType)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,i=e.parentNode,o=!i;return o&&(i=U).appendChild(e),r=~L.qsa(i,t).indexOf(e),o&&U.removeChild(e),r},y=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},v=function(e){return e.filter(function(t,n){return e.indexOf(t)==n})},L.fragment=function(e,t){t===l&&(t=E.test(e)&&RegExp.$1),t in C||(t="*");var n=C[t];return n.innerHTML=""+e,d.each(m.call(n.childNodes),function(){n.removeChild(this)})},L.Z=function(e,t){return(e=e||[]).__proto__=arguments.callee.prototype,e.selector=t||"",e},L.isZ=function(e){return e instanceof L.Z},L.init=function(t,i){if(!t)return L.Z();if(e(t))return d(P).ready(t);if(L.isZ(t))return t;var o;if(r(t))o=t.filter(function(e){return e!==l&&null!==e});else if(n(t))o=[d.extend({},t)],t=null;else if(S.indexOf(t.nodeType)>=0||t===window)o=[t],t=null;else if(E.test(t))o=L.fragment(t.trim(),RegExp.$1),t=null;else{if(i!==l)return d(i).find(t);o=L.qsa(P,t)}return L.Z(o,t)},(d=function(e,t){return L.init(e,t)}).extend=function(e){return m.call(arguments,1).forEach(function(t){for(p in t)t[p]!==l&&(e[p]=t[p])}),e},L.qsa=function(e,t){var n;return e===P&&A.test(t)?(n=e.getElementById(RegExp.$1))?[n]:g:1!==e.nodeType&&9!==e.nodeType?g:m.call($.test(t)?e.getElementsByClassName(RegExp.$1):k.test(t)?e.getElementsByTagName(t):e.querySelectorAll(t))},d.isFunction=e,d.isObject=t,d.isArray=r,d.isPlainObject=n,d.inArray=function(e,t,n){return g.indexOf.call(t,e,n)},d.trim=function(e){return e.trim()},d.uuid=0,d.map=function(e,t){var n,r,o,a,s=[];if(i(e))for(r=0;r<e.length;r++)null!=(n=t(e[r],r))&&s.push(n);else for(o in e)null!=(n=t(e[o],o))&&s.push(n);return(a=s).length>0?[].concat.apply([],a):a},d.each=function(e,t){var n,r;if(i(e)){for(n=0;n<e.length;n++)if(!1===t.call(e[n],n,e[n]))return e}else for(r in e)if(!1===t.call(e[r],r,e[r]))return e;return e},d.fn={forEach:g.forEach,reduce:g.reduce,push:g.push,indexOf:g.indexOf,concat:g.concat,map:function(e){return d.map(this,function(t,n){return e.call(t,n,t)})},slice:function(){return d(m.apply(this,arguments))},ready:function(e){return j.test(P.readyState)?e(d):P.addEventListener("DOMContentLoaded",function(){e(d)},!1),this},get:function(e){return e===l?m.call(this):this[e]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return this.forEach(function(t,n){e.call(t,n,t)}),this},filter:function(e){return d([].filter.call(this,function(t){return L.matches(t,e)}))},add:function(e,t){return d(v(this.concat(d(e,t))))},is:function(e){return this.length>0&&L.matches(this[0],e)},not:function(t){var n=[];if(e(t)&&t.call!==l)this.each(function(e){t.call(this,e)||n.push(this)});else{var r="string"==typeof t?this.filter(t):i(t)&&e(t.item)?m.call(t):d(t);this.forEach(function(e){r.indexOf(e)<0&&n.push(e)})}return d(n)},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!t(e)?e:d(e)},last:function(){var e=this[this.length-1];return e&&!t(e)?e:d(e)},find:function(e){var t;return t=1==this.length?L.qsa(this[0],e):this.map(function(){return L.qsa(this,e)}),d(t)},closest:function(e,t){for(var n=this[0];n&&!L.matches(n,e);)n=n!==t&&n!==P&&n.parentNode;return d(n)},parents:function(e){for(var t=[],n=this;n.length>0;)n=d.map(n,function(e){if((e=e.parentNode)&&e!==P&&t.indexOf(e)<0)return t.push(e),e});return u(t,e)},parent:function(e){return u(v(this.pluck("parentNode")),e)},children:function(e){return u(this.map(function(){return m.call(this.children)}),e)},siblings:function(e){return u(this.map(function(e,t){return m.call(t.parentNode.children).filter(function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return this.map(function(){return this[e]})},show:function(){return this.each(function(){var e,t,n;"none"==this.style.display&&(this.style.display=null),"none"==w(this,"").getPropertyValue("display")&&(this.style.display=(e=this.nodeName,_[e]||(t=P.createElement(e),P.body.appendChild(t),n=w(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),_[e]=n),_[e]))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return this.each(function(){d(this).wrapAll(d(e)[0].cloneNode(!1))})},wrapAll:function(e){return this[0]&&(d(this[0]).before(e=d(e)),e.append(this)),this},unwrap:function(){return this.parent().each(function(){d(this).replaceWith(d(this).children())}),this},clone:function(){return d(this.map(function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(e){return(e===l?"none"==this.css("display"):e)?this.show():this.hide()},prev:function(){return d(this.pluck("previousElementSibling"))},next:function(){return d(this.pluck("nextElementSibling"))},html:function(e){return e===l?this.length>0?this[0].innerHTML:null:this.each(function(t){var n=this.innerHTML;d(this).empty().append(c(this,e,t,n))})},text:function(e){return e===l?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=e})},attr:function(e,n){var r;return"string"==typeof e&&n===l?0==this.length||1!==this[0].nodeType?l:"value"==e&&"INPUT"==this[0].nodeName?this.val():!(r=this[0].getAttribute(e))&&e in this[0]?this[0][e]:r:this.each(function(r){if(1===this.nodeType)if(t(e))for(p in e)this.setAttribute(p,e[p]);else this.setAttribute(e,c(this,n,r,this.getAttribute(e)))})},removeAttr:function(e){return this.each(function(){1===this.nodeType&&this.removeAttribute(e)})},prop:function(e,t){return t===l?this[0]?this[0][e]:l:this.each(function(n){this[e]=c(this,t,n,this[e])})},data:function(e,t){var n=this.attr("data-"+o(e),t);return null!==n?n:l},val:function(e){return e===l?this.length>0?this[0].value:l:this.each(function(t){this.value=c(this,e,t,this.value)})},offset:function(){if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:e.width,height:e.height}},css:function(e,t){if(t===l&&"string"==typeof e)return 0==this.length?l:this[0].style[y(e)]||w(this[0],"").getPropertyValue(e);var n="";for(p in e)"string"==typeof e[p]&&""==e[p]?this.each(function(){this.style.removeProperty(o(p))}):n+=o(p)+":"+s(p,e[p])+";";return"string"==typeof e&&(""==t?this.each(function(){this.style.removeProperty(o(e))}):n=o(e)+":"+s(e,t)),this.each(function(){this.style.cssText+=";"+n})},index:function(e){return e?this.indexOf(d(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!(this.length<1)&&a(e).test(this[0].className)},addClass:function(e){return this.each(function(t){h=[];var n=this.className;c(this,e,t,n).split(/\s+/g).forEach(function(e){d(this).hasClass(e)||h.push(e)},this),h.length&&(this.className+=(n?" ":"")+h.join(" "))})},removeClass:function(e){return this.each(function(t){if(e===l)return this.className="";h=this.className,c(this,e,t,h).split(/\s+/g).forEach(function(e){h=h.replace(a(e)," ")}),this.className=h.trim()})},toggleClass:function(e,t){return this.each(function(n){var r=c(this,e,n,this.className);(t===l?!d(this).hasClass(r):t)?d(this).addClass(r):d(this).removeClass(r)})}},["width","height"].forEach(function(e){d.fn[e]=function(t){var n,r=e.replace(/./,function(e){return e[0].toUpperCase()});return t===l?this[0]==window?window["inner"+r]:this[0]==P?P.documentElement["offset"+r]:(n=this.offset())&&n[e]:this.each(function(n){var r=d(this);r.css(e,c(this,t,n,r[e]()))})}}),["after","prepend","before","append"].forEach(function(e,n){d.fn[e]=function(){var e=d.map(arguments,function(e){return t(e)?e:L.fragment(e)});if(e.length<1)return this;var r=this.length,i=r>1,o=n<2;return this.each(function(t,a){for(var s=0;s<e.length;s++){var u=e[o?e.length-s-1:s];f(u,function(e){null!=e.nodeName&&"SCRIPT"===e.nodeName.toUpperCase()&&(!e.type||"text/javascript"===e.type)&&window.eval.call(window,e.innerHTML)}),i&&t<r-1&&(u=u.cloneNode(!0)),l=a,p=u,h=void 0,(h=(c=n)%2?l:l.parentNode)?h.insertBefore(p,c?1==c?h.firstChild:2==c?l:null:l.nextSibling):d(p).remove()}var c,l,p,h})},d.fn[n%2?e+"To":"insert"+(n?"Before":"After")]=function(t){return d(t)[e](this),this}}),L.Z.prototype=d.fn,L.camelize=y,L.uniq=v,d.zepto=L,d}();function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.Zepto=Zepto,"$"in window||(window.$=Zepto),function(e){function t(e){return e._zid||(e._zid=c++)}function n(e,n,i,o){if((n=r(n)).ns)var a=(s=n.ns,new RegExp("(?:^| )"+s.replace(" "," .* ?")+"(?: |$)"));var s;return(u[t(e)]||[]).filter(function(e){return e&&(!n.e||e.e==n.e)&&(!n.ns||a.test(e.ns))&&(!i||t(e.fn)===t(i))&&(!o||e.sel==o)})}function r(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function i(t,n,r){e.isObject(t)?e.each(t,r):t.split(/\s/).forEach(function(e){r(e,n)})}function o(n,o,a,s,c,f){f=!!f;var l=t(n),p=u[l]||(u[l]=[]);i(o,a,function(t,i){var o=c&&c(i,t),a=o||i,u=function(e){var t=a.apply(n,[e].concat(e.data));return!1===t&&e.preventDefault(),t},l=e.extend(r(t),{fn:i,proxy:u,sel:s,del:o,i:p.length});p.push(l),n.addEventListener(l.e,u,f)})}function a(e,r,o,a){var s=t(e);i(r||"",o,function(t,r){n(e,t,r,a).forEach(function(t){delete u[s][t.i],e.removeEventListener(t.e,t.proxy,!1)})})}function s(t){var n=e.extend({originalEvent:t},t);return e.each(d,function(e,r){n[e]=function(){return this[r]=l,t[e].apply(t,arguments)},n[r]=p}),n}e.zepto.qsa;var u={},c=1,f={};f.click=f.mousedown=f.mouseup=f.mousemove="MouseEvents",e.event={add:o,remove:a},e.proxy=function(n,r){if(e.isFunction(n)){var i=function(){return n.apply(r,arguments)};return i._zid=t(n),i}if("string"==typeof r)return e.proxy(n[r],n);throw new TypeError("expected function")},e.fn.bind=function(e,t){return this.each(function(){o(this,e,t)})},e.fn.unbind=function(e,t){return this.each(function(){a(this,e,t)})},e.fn.one=function(e,t){return this.each(function(n,r){o(this,e,t,null,function(e,t){return function(){var n=e.apply(r,arguments);return a(r,t,e),n}})})};var l=function(){return!0},p=function(){return!1},d={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(t,n,r){var i=!1;return"blur"!=n&&"focus"!=n||(e.iswebkit?n="blur"==n?"focusout":"focus"==n?"focusin":n:i=!0),this.each(function(a,u){o(u,n,r,t,function(n){return function(r){var i,o=e(r.target).closest(t,u).get(0);if(o)return i=e.extend(s(r),{currentTarget:o,liveFired:u}),n.apply(o,[i].concat([].slice.call(arguments,1)))}},i)})},e.fn.undelegate=function(e,t,n){return this.each(function(){a(this,t,n,e)})},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,r){return null==n||e.isFunction(n)?this.bind(t,n):this.delegate(n,t,r)},e.fn.off=function(t,n,r){return null==n||e.isFunction(n)?this.unbind(t,n):this.undelegate(n,t,r)},e.fn.trigger=function(t,n){return"string"==typeof t&&(t=e.Event(t)),function(e){if(!("defaultPrevented"in e)){e.defaultPrevented=!1;var t=e.preventDefault;e.preventDefault=function(){this.defaultPrevented=!0,t.call(this)}}}(t),t.data=n,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(t)})},e.fn.triggerHandler=function(t,r){var i,o;return this.each(function(a,u){(i=s("string"==typeof t?e.Event(t):t)).data=r,i.target=u,e.each(n(u,t.type||t),function(e,t){if(o=t.proxy(i),i.isImmediatePropagationStopped())return!1})}),o},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return this.bind(t,e)}}),["focus","blur"].forEach(function(t){e.fn[t]=function(e){if(e)this.bind(t,e);else if(this.length)try{this.get(0)[t]()}catch(e){}return this}}),e.Event=function(e,t){var n=document.createEvent(f[e]||"Events"),r=!0;if(t)for(var i in t)"bubbles"==i?r=!!t[i]:n[i]=t[i];return n.initEvent(e,r,!0,null,null,null,null,null,null,null,null,null,null,null,null),n}}(Zepto),function(e){function t(e){var t=this.os={},n=this.browser={},r=e.match(/WebKit\/([\d.]+)/),i=e.match(/(Android)\s+([\d.]+)/),o=e.match(/(iPad).*OS\s([\d_]+)/),a=!o&&e.match(/(iPhone\sOS)\s([\d_]+)/),s=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),u=s&&e.match(/TouchPad/),c=e.match(/Kindle\/([\d.]+)/),f=e.match(/Silk\/([\d._]+)/),l=e.match(/(BlackBerry).*Version\/([\d.]+)/);(n.webkit=!!r)&&(n.version=r[1]),i&&(t.android=!0,t.version=i[2]),a&&(t.ios=t.iphone=!0,t.version=a[2].replace(/_/g,".")),o&&(t.ios=t.ipad=!0,t.version=o[2].replace(/_/g,".")),s&&(t.webos=!0,t.version=s[2]),u&&(t.touchpad=!0),l&&(t.blackberry=!0,t.version=l[2]),c&&(t.kindle=!0,t.version=c[1]),f&&(n.silk=!0,n.version=f[1]),!f&&t.android&&e.match(/Kindle Fire/)&&(n.silk=!0)}t.call(e,navigator.userAgent),e.__detect=t}(Zepto),function(e,t){function n(e){return e.toLowerCase()}function r(e){return i?i+e:n(e)}var i,o="",a=window.document.createElement("div"),s=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,u={};e.each({Webkit:"webkit",Moz:"",O:"o",ms:"MS"},function(e,r){if(a.style[e+"TransitionProperty"]!==t)return o="-"+n(e)+"-",i=r,!1}),u[o+"transition-property"]=u[o+"transition-duration"]=u[o+"transition-timing-function"]=u[o+"animation-name"]=u[o+"animation-duration"]="",e.fx={off:i===t&&a.style.transitionProperty===t,cssPrefix:o,transitionEnd:r("TransitionEnd"),animationEnd:r("AnimationEnd")},e.fn.animate=function(t,n,r,i){return e.isObject(n)&&(r=n.easing,i=n.complete,n=n.duration),n&&(n/=1e3),this.anim(t,n,r,i)},e.fn.anim=function(n,r,i,a){var c,f,l,p={},d=this,h=e.fx.transitionEnd;if(r===t&&(r=.4),e.fx.off&&(r=0),"string"==typeof n)p[o+"animation-name"]=n,p[o+"animation-duration"]=r+"s",h=e.fx.animationEnd;else{for(f in n)s.test(f)?(c||(c=[]),c.push(f+"("+n[f]+")")):p[f]=n[f];c&&(p[o+"transform"]=c.join(" ")),!e.fx.off&&"object"==(void 0===n?"undefined":_typeof(n))&&(p[o+"transition-property"]=Object.keys(n).join(", "),p[o+"transition-duration"]=r+"s",p[o+"transition-timing-function"]=i||"linear")}return l=function(t){if(void 0!==t){if(t.target!==t.currentTarget)return;e(t.target).unbind(h,arguments.callee)}e(this).css(u),a&&a.call(this)},r>0&&this.bind(h,l),setTimeout(function(){d.css(p),r<=0&&setTimeout(function(){d.each(function(){l.call(this)})},0)},0),this},a=null}(Zepto),function(e){function t(t,n,r,i){if(t.global)return o=n||p,a=r,s=i,u=e.Event(a),e(o).trigger(u,s),!u.defaultPrevented;var o,a,s,u}function n(e,n,r){var o=r.context,a="success";r.success.call(o,e,a,n),t(r,o,"ajaxSuccess",[n,r,e]),i(a,n,r)}function r(e,n,r,o){var a=o.context;o.error.call(a,r,n,e),t(o,a,"ajaxError",[r,o,e]),i(n,r,o)}function i(n,r,i){var o,a=i.context;i.complete.call(a,r,n),t(i,a,"ajaxComplete",[r,i]),(o=i).global&&!--e.active&&t(o,null,"ajaxStop")}function o(){}function a(e,t){return(e+"&"+t).replace(/[&?]{1,2}/,"?")}function s(t){l(t.data)&&(t.data=e.param(t.data)),t.data&&(!t.type||"GET"==t.type.toUpperCase())&&(t.url=a(t.url,t.data))}var u,c,f=0,l=e.isObject,p=window.document,d=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,h=/^(?:text|application)\/javascript/i,y=/^(?:text|application)\/xml/i,v="application/json",g="text/html",m=/^\s*$/;e.active=0,e.ajaxJSONP=function(t){var r,a="jsonp"+ ++f,u=p.createElement("script"),c={abort:function(){e(u).remove(),a in window&&(window[a]=o),i("abort",c,t)}};return t.error&&(u.onerror=function(){c.abort(),t.error()}),window[a]=function(i){clearTimeout(r),e(u).remove(),delete window[a],n(i,c,t)},s(t),u.src=t.url.replace(/=\?/,"="+a),e("head").append(u),t.timeout>0&&(r=setTimeout(function(){c.abort(),i("timeout",c,t)},t.timeout)),c},e.ajaxSettings={type:"GET",beforeSend:o,success:o,error:o,complete:o,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:v,xml:"application/xml, text/xml",html:g,text:"text/plain"},crossDomain:!1,timeout:0},e.ajax=function(i){var f,l=e.extend({},i||{});for(u in e.ajaxSettings)void 0===l[u]&&(l[u]=e.ajaxSettings[u]);(f=l).global&&0==e.active++&&t(f,null,"ajaxStart"),l.crossDomain||(l.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(l.url)&&RegExp.$2!=window.location.host);var p=l.dataType,d=/=\?/.test(l.url);if("jsonp"==p||d)return d||(l.url=a(l.url,"callback=?")),e.ajaxJSONP(l);l.url||(l.url=window.location.toString()),s(l);var P,_=l.accepts[p],b={},w=/^([\w-]+:)\/\//.test(l.url)?RegExp.$1:window.location.protocol,x=e.ajaxSettings.xhr();l.crossDomain||(b["X-Requested-With"]="XMLHttpRequest"),_&&(b.Accept=_,_.indexOf(",")>-1&&(_=_.split(",",2)[0]),x.overrideMimeType&&x.overrideMimeType(_)),(l.contentType||l.data&&"GET"!=l.type.toUpperCase())&&(b["Content-Type"]=l.contentType||"application/x-www-form-urlencoded"),l.headers=e.extend(b,l.headers||{}),x.onreadystatechange=function(){if(4==x.readyState){clearTimeout(P);var e,t=!1;if(x.status>=200&&x.status<300||304==x.status||0==x.status&&"file:"==w){p=p||((i=x.getResponseHeader("content-type"))&&(i==g?"html":i==v?"json":h.test(i)?"script":y.test(i)&&"xml")||"text"),e=x.responseText;try{"script"==p?(0,eval)(e):"xml"==p?e=x.responseXML:"json"==p&&(e=m.test(e)?null:JSON.parse(e))}catch(e){t=e}t?r(t,"parsererror",x,l):n(e,x,l)}else r(null,"error",x,l)}var i};var E=!("async"in l)||l.async;for(c in x.open(l.type,l.url,E),l.headers)x.setRequestHeader(c,l.headers[c]);return!1===function(e,n){var r=n.context;if(!1===n.beforeSend.call(r,e,n)||!1===t(n,r,"ajaxBeforeSend",[e,n]))return!1;t(n,r,"ajaxSend",[e,n])}(x,l)?(x.abort(),!1):(l.timeout>0&&(P=setTimeout(function(){x.onreadystatechange=o,x.abort(),r(null,"timeout",x,l)},l.timeout)),x.send(l.data?l.data:null),x)},e.get=function(t,n){return e.ajax({url:t,success:n})},e.post=function(t,n,r,i){return e.isFunction(n)&&(i=i||r,r=n,n=null),e.ajax({type:"POST",url:t,data:n,success:r,dataType:i})},e.getJSON=function(t,n){return e.ajax({url:t,success:n,dataType:"json"})},e.fn.load=function(t,n){if(!this.length)return this;var r,i=this,o=t.split(/\s/);return o.length>1&&(t=o[0],r=o[1]),e.get(t,function(t){i.html(r?e(p.createElement("div")).html(t.replace(d,"")).find(r).html():t),n&&n.call(i)}),this};var P=encodeURIComponent;e.param=function(t,n){var r=[];return r.add=function(e,t){this.push(P(e)+"="+P(t))},function t(n,r,i,o){var a=e.isArray(r);e.each(r,function(r,s){o&&(r=i?o:o+"["+(a?"":r)+"]"),!o&&a?n.add(s.name,s.value):(i?e.isArray(s):l(s))?t(n,s,i,r):n.add(r,s)})}(r,t,n),r.join("&").replace("%20","+")}}(Zepto),function(e){e.fn.serializeArray=function(){var t,n=[];return e(Array.prototype.slice.call(this.get(0).elements)).each(function(){var r=(t=e(this)).attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=r&&"reset"!=r&&"button"!=r&&("radio"!=r&&"checkbox"!=r||this.checked)&&n.push({name:t.attr("name"),value:t.val()})}),n},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.defaultPrevented||this.get(0).submit()}return this}}(Zepto),function(e){function t(){i=null,o.last&&(o.el.trigger("longTap"),o={})}function n(){i&&clearTimeout(i),i=null}var r,i,o={};e(document).ready(function(){var a,s;e(document.body).bind("touchstart",function(n){var u;a=Date.now(),s=a-(o.last||a),o.el=e("tagName"in(u=n.touches[0].target)?u:u.parentNode),r&&clearTimeout(r),o.x1=n.touches[0].pageX,o.y1=n.touches[0].pageY,s>0&&s<=250&&(o.isDoubleTap=!0),o.last=a,i=setTimeout(t,750)}).bind("touchmove",function(e){n(),o.x2=e.touches[0].pageX,o.y2=e.touches[0].pageY}).bind("touchend",function(e){var t,i,a,s;n(),o.isDoubleTap?(o.el.trigger("doubleTap"),o={}):o.x2&&Math.abs(o.x1-o.x2)>30||o.y2&&Math.abs(o.y1-o.y2)>30?(o.el.trigger("swipe")&&o.el.trigger("swipe"+(t=o.x1,i=o.x2,a=o.y1,s=o.y2,Math.abs(t-i)>=Math.abs(a-s)?t-i>0?"Left":"Right":a-s>0?"Up":"Down")),o={}):"last"in o&&(o.el.trigger("tap"),r=setTimeout(function(){r=null,o.el.trigger("singleTap"),o={}},250))}).bind("touchcancel",function(){r&&clearTimeout(r),i&&clearTimeout(i),i=r=null,o={}})}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.bind(t,e)}})}(Zepto);_typeof="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)};$(document).ready(function(){var e,t=0;$(".autosave-action").click(function(){var n;null===e?e=setInterval(function(){++t>30&&(t=0,$("form").first().trigger("submit")),$(".autosave-label").text("Autosave in "+(30-t))},1e3):(clearInterval(e),e=null,t=0),n=null!==e,$(".autosave-action").toggleClass("green",n),$(".autosave-action").toggleClass("autosave-on",n),$(".autosave-action").toggleClass("secondary",!n),$(".autosave-label").text(n?"Autosave in 30":"Autosave: Off")})}),function(e){e.fn.changeSaver=function(){var t=e(this),n=!1,r=[],i=arguments[0]||"input[type=text], textarea";t.find(i).forEach(function(t,n){r.push({element:t,original_value:e(t).val()})}),e(t).on("submit",function(){n=!0}),e(window).on("beforeunload",function(){if(!n&&function(){for(var t=0;t<r.length;t++){var n=r[t];if(n.original_value!=e(n.element).val())return!0}return!1}())return"There are unsaved changes"})}}(Zepto),$(function(){var e=$("#label-field"),t=$(".hide"),n=$("#label-type"),r=$("#pagetype"),i=function(){var n=e.val();t.hide(),"image"==n?t.show():"file"==n&&$(".attributes_type").show()};e.bind("change",i),n.bind("change",function(){"page"==n.val()?r.parent().show():(r.parent().hide(),r.val("all"))}),i()}),$(function(){var e=$(document),t=$("body"),n=$('<div id="upload-file"><span>Upload your file</span></div>'),r=["text/css","text/javascript","application/javascript","text/x-markdown","application/pdf","image/jpeg","image/gif","image/png","image/bmp"],i=function(e){return n.hide().removeClass("active"),e.preventDefault(),!1},o=function(){if(-1!==["text/x-markdown"].indexOf(this.file.type)&&(e=$(".main textarea")).val(this.result).trigger("keydown"),-1!==["text/javascript","application/javascript"].indexOf(this.file.type)&&(e=$("textarea[name=js]")).val(this.result),-1!==["text/css"].indexOf(this.file.type)){var e=$("textarea[name=css]");e.val(this.result)}if(-1!==["image/jpeg","image/gif","image/png","image/bmp","application/pdf"].indexOf(this.file.type)){var t,n=window.location.pathname,r=n.split("/");t="add"==r[r.length-1]?n.split("/").slice(0,-2).join("/")+"/upload":n.split("/").slice(0,-3).join("/")+"/upload",a(t,this.file)}},a=function(e,t){var n=new XMLHttpRequest;n.open("post",e);var r=new FormData;r.append("file",t),n.onreadystatechange=function(){if(4==this.readyState)return u(t,this.responseText)},n.upload?n.upload.onprogress=function(e){s(e.position||e.loaded,e.totalSize||e.total)}:n.addEventListener("progress",function(e){s(e.position||e.loaded,e.totalSize||e.total)},!1),n.send(r)},s=function(e,t){e==t?$("#upload-file-progress").hide():($("#upload-file-progress").show(),$("#upload-file-progress progress").prop("value",e),$("#upload-file-progress progress").prop("max",t))},u=function(e,t){var n=JSON.parse(t);if(n.uri){var r=$(".main textarea"),i=r[0],o=i.selectionStart,a=i.value,s="["+e.name+"]("+n.uri+")\n\n";s=-1!==["image/jpeg","image/gif","image/png","image/bmp"].indexOf(e.type)?"\n\n!"+s:"\n\n"+s,i.value=a.substring(0,o)+s+a.substring(o),i.selectionStart=i.selectionEnd=o+e.length,r.trigger("keydown")}};window.FileReader&&window.FileList&&window.File&&(e.on("dragover",function(e){return e.preventDefault(),n.show().addClass("active"),!1}),e.on("dragenter",i),e.on("drop",function(e){e.preventDefault();for(var t=e.target.files||e.dataTransfer.files,i=0;i<t.length;i++){var a=t.item(i);-1!==r.indexOf(a.type)?(u=a,c=void 0,(c=new FileReader).file=u,c.callback=o,c.onload=c.callback,c.readAsBinaryString(u)):(s=a.type+" not supported",window.console&&console.log(s))}var s,u,c;return n.hide().removeClass("active"),!1}),e.on("dragleave",i),e.on("dragexit",function(e){return e.preventDefault(),n.hide().removeClass("active"),!1}),t.append(n),t.append('<div id="upload-file-progress"><progress value="0"></progress></div>'))}),function(e){e.fn.editor=function(){var t=arguments[1]||{},n=(e.extend({},{},t),e(this)),r=n.parent(),i=function(e,t){var r=n[0],i=r.selectionStart,o=r.selectionEnd,a=r.value;r.value=a.substring(0,i)+e+a.substring(i,o)+t+a.substring(o),r.selectionStart=o+e.length+t.length},o={bold:function(){i("**","**")},italic:function(){i("*","*")},code:function(){var e="`",t=n[0],r=t.selectionStart,o=t.selectionEnd,a=t.value.substring(r,o);/\n+.*/gm.test(a)&&(e="\n```\n"),i(e,e)},link:function(){var e=n[0],t=e.selectionStart,r=e.selectionEnd,i=e.value,o=i.substring(t,r),a="["+o+"]("+o+")";e.value=i.substring(0,t)+a+i.substring(r),e.selectionStart=e.selectionEnd=r+a.length},list:function(){for(var e=n[0],t=e.selectionStart,r=e.selectionEnd,i=e.value,o=i.substring(t,r).split("\n"),a=0;a<o.length;a++)o[a]="* "+o[a];e.value=i.substring(0,t)+"\n"+o.join("\n")+"\n"+i.substring(r)},quote:function(){for(var e=n[0],t=e.selectionStart,r=e.selectionEnd,i=e.value,o=i.substring(t,r).split("\n"),a=0;a<o.length;a++)o[a]="> "+o[a];e.value=i.substring(0,t)+o.join("\n")+i.substring(r)}};n.on("keydown",function(e){9===e.keyCode&&(e.preventDefault(),e.stopPropagation(),e.shiftKey&&9===e.keyCode?function(e){var t=n[0],r=t.selectionStart,i=t.selectionEnd,o=t.value,a=new RegExp(/^[\t]{1}/),s=0;if(r==i){for(;r>0;){if("\n"==o.charAt(r)){r++;break}r--}var u=o.substring(r,i);u.match(a)&&(t.value=o.substring(0,r)+u.replace(a,"")+o.substring(i),i--),t.selectionStart=t.selectionEnd=i}else{for(var c=o.substring(r,i).split("\n"),f=0;f<c.length;f++)c[f].match(a)&&(s++,c[f]=c[f].replace(a,""));t.value=o.substring(0,r)+c.join("\n")+o.substring(i),t.selectionStart=r,t.selectionEnd=i-s}}():function(e){for(var t=n[0],r=t.selectionStart,i=t.selectionEnd,o=t.value,a=o.substring(r,i).split("\n"),s=0;s<a.length;s++)a[s]="\t"+a[s];t.value=o.substring(0,r)+a.join("\n")+o.substring(i),i>r?(t.selectionStart=r,t.selectionEnd=i+a.length):t.selectionStart=t.selectionEnd=r+1}())}),r.on("click","nav a",function(t){var n=e(t.target).attr("href").split("#").pop();return o[n]&&o[n](),!1})}}(Zepto),function(e){var t=e(document),n=e("form").first(),r=n.find("button[type=submit]"),i=r.html(),o=r.data("loading"),a=(e(".top nav .active a"),e(".header .wrap")),s=e(".notifications"),u=document.title;t.on("keydown",function(e){if(e.ctrlKey&&83==e.keyCode&&!e.altKey)return n.trigger("submit"),!1}),n.on("submit",function(){var t={};e.each(e(this).serializeArray(),function(e,n){t[n.name]=n.value});var c=e(".autosave-action").hasClass("autosave-on");return t.autosave=c,r.prop("disabled",!0).css("cursor","wait").html(o),o&&(document.title=o),e.ajax({url:n.attr("action"),type:"POST",data:t,success:function(t,n,o){if((t=JSON.parse(t)).notification)document.title=t.notification,c=e('<p class="success">'+t.notification+"</p>"),s.append(c),setTimeout(function(){c.animate({opacity:0},600,"ease-out",function(){e(this).remove()})},3e3);else if(t.errors)for(index in t.errors){var a=t.errors[index],c=e('<p class="error">'+a+"</p>");s.append(c),setTimeout(function(){c.animate({opacity:0},600,"ease-out",function(){e(this).remove()})},3e3)}t.redirect&&t.redirect!=window.location.href?setTimeout(function(){window.location.href=t.redirect},1e3):setTimeout(function(){document.title=u},3e3),r.prop("disabled",!1).html(i).removeAttr("style")},error:function(t,n,o){var s=e('<div class="notifications"><p class="error">Error</p></div>');a.prepend(s),setTimeout(function(){s.animate({opacity:0},600,"ease-out",function(){e(this).remove()}),document.title=u},3e3),r.prop("disabled",!1).html(i).removeAttr("style")}}),!1})}(Zepto),$(function(){var e=$(document),t=$("html"),n=t.children("body"),r={target:$("textarea[name=html], textarea[name=content]"),exitSpan:"#exit-focus",enter:function(){t.addClass("focus"),n.children(r.exitSpan).length||n.append('<span class="btn" id="'+r.exitSpan.substr(1)+'">Exit focus mode (ESC)</span>'),n.children(r.exitSpan).css("opacity",0).animate({opacity:1},250),r.target.placeholder=(r.target.placeholder||"").split(".")[0]+"."},exit:function(){n.children(r.exitSpan).animate({opacity:0},250),t.removeClass("focus")}};r.target.focus(r.enter).blur(r.exit),e.on("keyup",function(e){70==e.keyCode&&r.enter(),27==e.keyCode&&r.exit()})}),$(function(e,t){e=$("input[name=title]");var n=!1;(t=$("input[name=name]")).bind("keyup",function(){n=!0}),e.bind("keyup",function(){n||t.val(e.val())})}),$(function(){var e=$("fieldset.redirect"),t=$("input[name=redirect]");$("button.secondary.redirector").bind("click",function(){return e.toggleClass("show"),e.hasClass("show")?t.removeAttr("tabindex"):t.attr("tabindex","-1"),!1}),t.change(function(){""===t.val()&&e.removeClass("show")}),""!==t.val()&&e.addClass("show"),t.hasClass("show")||t.attr("tabindex",-1)}),$(function(){var e=$("input[name=title]"),t=$("input[name=slug]"),n=t.val(),r=function(e){var t;e=String(e),_defineProperty(t={"©":"(c)","Á":"A","á":"a","À":"A","à":"a","Â":"A","â":"a","Å":"A","å":"a","Ä":"Ae","ä":"ae","Ã":"A","ã":"a","Ą":"A","ą":"a","Ā":"A","ā":"a","Æ":"AE","æ":"ae","Ć":"C","ć":"c","Č":"C","č":"c","Ç":"C","ç":"c","Ď":"D","ď":"d","Ð":"D","ð":"d","É":"E","é":"e","È":"E","è":"e","Ê":"E","ê":"e","Ě":"E","ě":"e","Ë":"E","ë":"e","Ę":"e","ę":"e","Ē":"E","ē":"e","Ğ":"G","ğ":"g","Ģ":"G","ģ":"g","Í":"I","í":"i","Ì":"I","ì":"i","Î":"I","î":"i","Ï":"I","ï":"i","İ":"I","Ī":"i","ī":"i","ı":"i","Ķ":"k","ķ":"k","Ļ":"L","ļ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ň":"N","ň":"n","Ñ":"N","ñ":"n","Ņ":"N","ņ":"n","Ó":"O"},"Ó","o"),_defineProperty(t,"ó","o"),_defineProperty(t,"Ò","O"),_defineProperty(t,"ò","o"),_defineProperty(t,"Ô","O"),_defineProperty(t,"ô","o"),_defineProperty(t,"Ö","Oe"),_defineProperty(t,"ö","oe"),_defineProperty(t,"Ő","O"),_defineProperty(t,"ő","o"),_defineProperty(t,"Õ","O"),_defineProperty(t,"õ","o"),_defineProperty(t,"Ø","O"),_defineProperty(t,"ø","o"),_defineProperty(t,"Ř","R"),_defineProperty(t,"ř","r"),_defineProperty(t,"Ś","S"),_defineProperty(t,"ś","s"),_defineProperty(t,"Š","S"),_defineProperty(t,"š","s"),_defineProperty(t,"Ş","S"),_defineProperty(t,"ş","s"),_defineProperty(t,"ß","ss"),_defineProperty(t,"Ť","T"),_defineProperty(t,"ť","t"),_defineProperty(t,"Ú","U"),_defineProperty(t,"ú","u"),_defineProperty(t,"Ù","U"),_defineProperty(t,"ù","u"),_defineProperty(t,"Û","U"),_defineProperty(t,"û","u"),_defineProperty(t,"Ů","U"),_defineProperty(t,"ů","u"),_defineProperty(t,"Ü","Ue"),_defineProperty(t,"ü","ue"),_defineProperty(t,"Ű","U"),_defineProperty(t,"ű","u"),_defineProperty(t,"Ū","u"),_defineProperty(t,"ū","u"),_defineProperty(t,"Ý","Y"),_defineProperty(t,"ý","y"),_defineProperty(t,"ÿ","y"),_defineProperty(t,"Ź","Z"),_defineProperty(t,"ź","z"),_defineProperty(t,"Ž","Z"),_defineProperty(t,"ž","z"),_defineProperty(t,"Ż","Z"),_defineProperty(t,"ż","z"),_defineProperty(t,"Þ","TH"),_defineProperty(t,"þ","th"),_defineProperty(t,"Α","A"),_defineProperty(t,"α","a"),_defineProperty(t,"Ά","A"),_defineProperty(t,"ά","a"),_defineProperty(t,"Β","B"),_defineProperty(t,"β","b"),_defineProperty(t,"Γ","G"),_defineProperty(t,"γ","g"),_defineProperty(t,"Δ","D"),_defineProperty(t,"δ","d"),_defineProperty(t,"Ε","E"),_defineProperty(t,"ε","e"),_defineProperty(t,"Έ","E"),_defineProperty(t,"έ","e"),_defineProperty(t,"Ζ","Z"),_defineProperty(t,"ζ","z"),_defineProperty(t,"Η","H"),_defineProperty(t,"η","h"),_defineProperty(t,"Ή","H"),_defineProperty(t,"ή","h"),_defineProperty(t,"Θ","8"),_defineProperty(t,"θ","8"),_defineProperty(t,"Ι","I"),_defineProperty(t,"ι","i"),_defineProperty(t,"Ί","I"),_defineProperty(t,"ί","i"),_defineProperty(t,"Ϊ","I"),_defineProperty(t,"ϊ","i"),_defineProperty(t,"ΐ","i"),_defineProperty(t,"Κ","K"),_defineProperty(t,"κ","k"),_defineProperty(t,"Λ","L"),_defineProperty(t,"λ","l"),_defineProperty(t,"Μ","M"),_defineProperty(t,"μ","m"),_defineProperty(t,"Ν","N"),_defineProperty(t,"ν","n"),_defineProperty(t,"Ξ","3"),_defineProperty(t,"ξ","3"),_defineProperty(t,"Ο","O"),_defineProperty(t,"ο","o"),_defineProperty(t,"Ό","O"),_defineProperty(t,"ό","o"),_defineProperty(t,"Π","P"),_defineProperty(t,"π","p"),_defineProperty(t,"Ρ","R"),_defineProperty(t,"ρ","r"),_defineProperty(t,"Σ","S"),_defineProperty(t,"ς","s"),_defineProperty(t,"σ","s"),_defineProperty(t,"Τ","T"),_defineProperty(t,"τ","t"),_defineProperty(t,"Υ","Y"),_defineProperty(t,"υ","y"),_defineProperty(t,"Ύ","Y"),_defineProperty(t,"ύ","y"),_defineProperty(t,"Ϋ","Y"),_defineProperty(t,"ϋ","y"),_defineProperty(t,"ΰ","y"),_defineProperty(t,"Φ","F"),_defineProperty(t,"φ","f"),_defineProperty(t,"Χ","X"),_defineProperty(t,"χ","x"),_defineProperty(t,"Ψ","PS"),_defineProperty(t,"ψ","ps"),_defineProperty(t,"Ω","W"),_defineProperty(t,"ω","w"),_defineProperty(t,"Ώ","W"),_defineProperty(t,"ώ","w"),_defineProperty(t,"А","A"),_defineProperty(t,"а","a"),_defineProperty(t,"Б","B"),_defineProperty(t,"б","b"),_defineProperty(t,"В","V"),_defineProperty(t,"в","v"),_defineProperty(t,"Г","G"),_defineProperty(t,"г","g"),_defineProperty(t,"Ґ","G"),_defineProperty(t,"Д","D"),_defineProperty(t,"д","d"),_defineProperty(t,"Е","E"),_defineProperty(t,"е","e"),_defineProperty(t,"Ё","Yo"),_defineProperty(t,"ё","yo"),_defineProperty(t,"Є","Ye"),_defineProperty(t,"є","ye"),_defineProperty(t,"Ж","Zh"),_defineProperty(t,"ж","zh"),_defineProperty(t,"З","Z"),_defineProperty(t,"з","z"),_defineProperty(t,"И","I"),_defineProperty(t,"и","i"),_defineProperty(t,"І","I"),_defineProperty(t,"і","i"),_defineProperty(t,"Ї","Yi"),_defineProperty(t,"ї","yi"),_defineProperty(t,"Й","J"),_defineProperty(t,"й","j"),_defineProperty(t,"К","K"),_defineProperty(t,"к","k"),_defineProperty(t,"Л","L"),_defineProperty(t,"л","l"),_defineProperty(t,"М","M"),_defineProperty(t,"м","m"),_defineProperty(t,"Н","N"),_defineProperty(t,"н","n"),_defineProperty(t,"О","O"),_defineProperty(t,"о","o"),_defineProperty(t,"П","P"),_defineProperty(t,"п","p"),_defineProperty(t,"Р","R"),_defineProperty(t,"р","r"),_defineProperty(t,"С","S"),_defineProperty(t,"с","s"),_defineProperty(t,"Т","T"),_defineProperty(t,"т","t"),_defineProperty(t,"У","U"),_defineProperty(t,"у","u"),_defineProperty(t,"Ф","F"),_defineProperty(t,"ф","f"),_defineProperty(t,"Х","H"),_defineProperty(t,"х","h"),_defineProperty(t,"Ц","C"),_defineProperty(t,"ц","c"),_defineProperty(t,"Ч","Ch"),_defineProperty(t,"ч","ch"),_defineProperty(t,"Ш","Sh"),_defineProperty(t,"ш","sh"),_defineProperty(t,"Щ","Sh"),_defineProperty(t,"щ","sh"),_defineProperty(t,"Ы","Y"),_defineProperty(t,"ы","y"),_defineProperty(t,"Э","E"),_defineProperty(t,"э","e"),_defineProperty(t,"Ю","Yu"),_defineProperty(t,"ю","yu"),_defineProperty(t,"Я","Ya"),_defineProperty(t,"я","ya");for(var n=["À","Á","Â","Ã","Ä","Å","Æ","Ç","È","É","Ê","Ë","Ì","Í","Î","Ï","Ð","Ñ","Ò","Ó","Ô","Õ","Ö","Ø","Ù","Ú","Û","Ü","Ý","ß","à","á","â","ã","ä","å","æ","ç","è","é","ê","ë","ì","í","î","ï","ñ","ò","ó","ô","õ","ö","ø","ù","ú","û","ü","ý","ÿ","Ā","ā","Ă","ă","Ą","ą","Ć","ć","Ĉ","ĉ","Ċ","ċ","Č","č","Ď","ď","Đ","đ","Ē","ē","Ĕ","ĕ","Ė","ė","Ę","ę","Ě","ě","Ĝ","ĝ","Ğ","ğ","Ġ","ġ","Ģ","ģ","Ĥ","ĥ","Ħ","ħ","Ĩ","ĩ","Ī","ī","Ĭ","ĭ","Į","į","İ","ı","Ĳ","ĳ","Ĵ","ĵ","Ķ","ķ","Ĺ","ĺ","Ļ","ļ","Ľ","ľ","Ŀ","ŀ","Ł","ł","Ń","ń","Ņ","ņ","Ň","ň","ŉ","Ō","ō","Ŏ","ŏ","Ő","ő","Œ","œ","Ŕ","ŕ","Ŗ","ŗ","Ř","ř","Ś","ś","Ŝ","ŝ","Ş","ş","Š","š","Ţ","ţ","Ť","ť","Ŧ","ŧ","Ũ","ũ","Ū","ū","Ŭ","ŭ","Ů","ů","Ű","ű","Ų","ų","Ŵ","ŵ","Ŷ","ŷ","Ÿ","Ź","ź","Ż","ż","Ž","ž","ſ","ƒ","Ơ","ơ","Ư","ư","Ǎ","ǎ","Ǐ","ǐ","Ǒ","ǒ","Ǔ","ǔ","Ǖ","ǖ","Ǘ","ǘ","Ǚ","ǚ","Ǜ","ǜ","Ǻ","ǻ","Ǽ","ǽ","Ǿ","ǿ","·","/","_",",",":",";"],r=["A","A","A","A","A","A","AE","C","E","E","E","E","I","I","I","I","D","N","O","O","O","O","O","O","U","U","U","U","Y","s","a","a","a","a","a","a","ae","c","e","e","e","e","i","i","i","i","n","o","o","o","o","o","o","u","u","u","u","y","y","A","a","A","a","A","a","C","c","C","c","C","c","C","c","D","d","D","d","E","e","E","e","E","e","E","e","E","e","G","g","G","g","G","g","G","g","H","h","H","h","I","i","I","i","I","i","I","i","I","i","IJ","ij","J","j","K","k","L","l","L","l","L","l","L","l","l","l","N","n","N","n","N","n","n","O","o","O","o","O","o","OE","oe","R","r","R","r","R","r","S","s","S","s","S","s","S","s","T","t","T","t","T","t","U","u","U","u","U","u","U","u","U","u","U","u","W","w","Y","y","Y","Z","z","Z","z","Z","z","s","f","O","o","U","u","A","a","I","i","O","o","U","u","U","u","U","u","U","u","U","u","A","a","AE","ae","O","o","-","-","-","-","-","-"],i=0;i<n.length;i++)e=e.replace(new RegExp(n[i],"g"),r[i]);return e.toLowerCase().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")};t.bind("focus",function(){t.val(),n=t.val()}),t.bind("blur",function(){""==t.val()?t.val(r(e.val())):t.val(r(t.val()))}),e.bind("keyup",function(){""==n&&t.val(r(e.val()))})}),function(e){e.fn.sortable=function(t){var n,r=e.extend({},{element:"li",dropped:function(){}},t),i=e(this).find(r.element);i.on("dragstart",function(t){e(this).addClass("moving"),n=this,t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/html",this.innerHTML)}),i.on("dragenter",function(){e(this).addClass("over")}),i.on("dragover",function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="move"}),i.on("dragleave",function(){e(this).removeClass("over")}),i.on("drop",function(e){e.preventDefault(),e.stopPropagation(),n!=this&&(n.innerHTML=this.innerHTML,this.innerHTML=e.dataTransfer.getData("text/html")),r.dropped()}),i.on("dragend",function(){e(this).removeClass("moving"),i.removeClass("over")})}}(Zepto),$(function(){function e(e){var n=window.pageYOffset;t.height(t.prop("scrollHeight")+"px"),window.scrollTo(0,n)}var t=$("textarea").first();t.on("change",e),t.on("cut paste drop keydown",function(t){window.setTimeout(function(){e()},0)}),t.focus(),t.select(),e()}),$(function(){if(window.XMLHttpRequest)e=new XMLHttpRequest;else if(window.ActiveXObject)try{var e=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}$("input[type=file]").bind("change",function(){var e=$(this);e.parent().parent().find(".current-file").html(e.val().replace(/\\/g,"/").replace(/.*\//,"")),new FormData;for(var n=this.files,r=0;r<n.length;r++){var i=n[r];if(-1!==["image/jpeg","image/gif","image/png","image/bmp","application/pdf"].indexOf(i.type)){var o=window.location.pathname,a=o.split("/");if("add"==a[a.length-1])s=o.split("/").slice(0,-2).join("/")+"/upload";else var s=o.split("/").slice(0,-3).join("/")+"/upload";t(s,i,this)}}});var t=function(t,n,r){e.open("post",t);var i=new FormData;i.append("file",n),e.onreadystatechange=function(){if(4==this.readyState){console.log("Uploaded");var e=JSON.parse(this.responseText);console.log(e),$(r).parent().append('<input type="hidden" name="'+$(r).attr("name")+'" value="'+e.uri+'">')}},e.upload?e.upload.onprogress=function(e){console.log(e.position+":"+e.total)}:e.addEventListener("progress",function(e){console.log(e.position+":"+e.total)},!1),e.send(i)}}),function(e){String.prototype.trim===e&&(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Array.prototype.reduce===e&&(Array.prototype.reduce=function(t){if(null==this)throw new TypeError;var n,r=Object(this),i=r.length>>>0,o=0;if("function"!=typeof t)throw new TypeError;if(0==i&&1==arguments.length)throw new TypeError;if(arguments.length>=2)n=arguments[1];else for(;;){if(o in r){n=r[o++];break}if(++o>=i)throw new TypeError}for(;o<i;)o in r&&(n=t.call(e,n,r[o],o,r)),o++;return n})}();Zepto=function(){function e(e){return"[object Function]"==N.call(e)}function t(e){return e instanceof Object}function n(t){var n,r;if("[object Object]"!==N.call(t))return!1;if(!(r=e(t.constructor)&&t.constructor.prototype)||!hasOwnProperty.call(r,"isPrototypeOf"))return!1;for(n in t);return n===l||hasOwnProperty.call(t,n)}function r(e){return e instanceof Array}function i(e){return"number"==typeof e.length}function o(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function a(e){return e in b?b[e]:b[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function s(e,t){return"number"!=typeof t||x[o(e)]?t:t+"px"}function u(e,t){return t===l?d(e):d(e).filter(t)}function c(t,n,r,i){return e(n)?n.call(t,r,i):n}function f(e,t){for(var n in t(e),e.childNodes)f(e.childNodes[n],t)}var l,p,d,h,y,v,g=[],m=g.slice,P=window.document,_={},b={},w=P.defaultView.getComputedStyle,x={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},E=/^\s*<(\w+|!)[^>]*>/,S=[1,3,8,9,11],T=P.createElement("table"),O=P.createElement("tr"),C={tr:P.createElement("tbody"),tbody:T,thead:T,tfoot:T,td:O,th:O,"*":P.createElement("div")},j=/complete|loaded|interactive/,$=/^\.([\w-]+)$/,A=/^#([\w-]+)$/,k=/^[\w-]+$/,N={}.toString,L={},U=P.createElement("div");return L.matches=function(e,t){if(!e||1!==e.nodeType)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,i=e.parentNode,o=!i;return o&&(i=U).appendChild(e),r=~L.qsa(i,t).indexOf(e),o&&U.removeChild(e),r},y=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},v=function(e){return e.filter(function(t,n){return e.indexOf(t)==n})},L.fragment=function(e,t){t===l&&(t=E.test(e)&&RegExp.$1),t in C||(t="*");var n=C[t];return n.innerHTML=""+e,d.each(m.call(n.childNodes),function(){n.removeChild(this)})},L.Z=function(e,t){return(e=e||[]).__proto__=arguments.callee.prototype,e.selector=t||"",e},L.isZ=function(e){return e instanceof L.Z},L.init=function(t,i){if(!t)return L.Z();if(e(t))return d(P).ready(t);if(L.isZ(t))return t;var o;if(r(t))o=t.filter(function(e){return e!==l&&null!==e});else if(n(t))o=[d.extend({},t)],t=null;else if(S.indexOf(t.nodeType)>=0||t===window)o=[t],t=null;else if(E.test(t))o=L.fragment(t.trim(),RegExp.$1),t=null;else{if(i!==l)return d(i).find(t);o=L.qsa(P,t)}return L.Z(o,t)},(d=function(e,t){return L.init(e,t)}).extend=function(e){return m.call(arguments,1).forEach(function(t){for(p in t)t[p]!==l&&(e[p]=t[p])}),e},L.qsa=function(e,t){var n;return e===P&&A.test(t)?(n=e.getElementById(RegExp.$1))?[n]:g:1!==e.nodeType&&9!==e.nodeType?g:m.call($.test(t)?e.getElementsByClassName(RegExp.$1):k.test(t)?e.getElementsByTagName(t):e.querySelectorAll(t))},d.isFunction=e,d.isObject=t,d.isArray=r,d.isPlainObject=n,d.inArray=function(e,t,n){return g.indexOf.call(t,e,n)},d.trim=function(e){return e.trim()},d.uuid=0,d.map=function(e,t){var n,r,o,a,s=[];if(i(e))for(r=0;r<e.length;r++)null!=(n=t(e[r],r))&&s.push(n);else for(o in e)null!=(n=t(e[o],o))&&s.push(n);return(a=s).length>0?[].concat.apply([],a):a},d.each=function(e,t){var n,r;if(i(e)){for(n=0;n<e.length;n++)if(!1===t.call(e[n],n,e[n]))return e}else for(r in e)if(!1===t.call(e[r],r,e[r]))return e;return e},d.fn={forEach:g.forEach,reduce:g.reduce,push:g.push,indexOf:g.indexOf,concat:g.concat,map:function(e){return d.map(this,function(t,n){return e.call(t,n,t)})},slice:function(){return d(m.apply(this,arguments))},ready:function(e){return j.test(P.readyState)?e(d):P.addEventListener("DOMContentLoaded",function(){e(d)},!1),this},get:function(e){return e===l?m.call(this):this[e]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return this.forEach(function(t,n){e.call(t,n,t)}),this},filter:function(e){return d([].filter.call(this,function(t){return L.matches(t,e)}))},add:function(e,t){return d(v(this.concat(d(e,t))))},is:function(e){return this.length>0&&L.matches(this[0],e)},not:function(t){var n=[];if(e(t)&&t.call!==l)this.each(function(e){t.call(this,e)||n.push(this)});else{var r="string"==typeof t?this.filter(t):i(t)&&e(t.item)?m.call(t):d(t);this.forEach(function(e){r.indexOf(e)<0&&n.push(e)})}return d(n)},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!t(e)?e:d(e)},last:function(){var e=this[this.length-1];return e&&!t(e)?e:d(e)},find:function(e){var t;return t=1==this.length?L.qsa(this[0],e):this.map(function(){return L.qsa(this,e)}),d(t)},closest:function(e,t){for(var n=this[0];n&&!L.matches(n,e);)n=n!==t&&n!==P&&n.parentNode;return d(n)},parents:function(e){for(var t=[],n=this;n.length>0;)n=d.map(n,function(e){if((e=e.parentNode)&&e!==P&&t.indexOf(e)<0)return t.push(e),e});return u(t,e)},parent:function(e){return u(v(this.pluck("parentNode")),e)},children:function(e){return u(this.map(function(){return m.call(this.children)}),e)},siblings:function(e){return u(this.map(function(e,t){return m.call(t.parentNode.children).filter(function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return this.map(function(){return this[e]})},show:function(){return this.each(function(){var e,t,n;"none"==this.style.display&&(this.style.display=null),"none"==w(this,"").getPropertyValue("display")&&(this.style.display=(e=this.nodeName,_[e]||(t=P.createElement(e),P.body.appendChild(t),n=w(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),_[e]=n),_[e]))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return this.each(function(){d(this).wrapAll(d(e)[0].cloneNode(!1))})},wrapAll:function(e){return this[0]&&(d(this[0]).before(e=d(e)),e.append(this)),this},unwrap:function(){return this.parent().each(function(){d(this).replaceWith(d(this).children())}),this},clone:function(){return d(this.map(function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(e){return(e===l?"none"==this.css("display"):e)?this.show():this.hide()},prev:function(){return d(this.pluck("previousElementSibling"))},next:function(){return d(this.pluck("nextElementSibling"))},html:function(e){return e===l?this.length>0?this[0].innerHTML:null:this.each(function(t){var n=this.innerHTML;d(this).empty().append(c(this,e,t,n))})},text:function(e){return e===l?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=e})},attr:function(e,n){var r;return"string"==typeof e&&n===l?0==this.length||1!==this[0].nodeType?l:"value"==e&&"INPUT"==this[0].nodeName?this.val():!(r=this[0].getAttribute(e))&&e in this[0]?this[0][e]:r:this.each(function(r){if(1===this.nodeType)if(t(e))for(p in e)this.setAttribute(p,e[p]);else this.setAttribute(e,c(this,n,r,this.getAttribute(e)))})},removeAttr:function(e){return this.each(function(){1===this.nodeType&&this.removeAttribute(e)})},prop:function(e,t){return t===l?this[0]?this[0][e]:l:this.each(function(n){this[e]=c(this,t,n,this[e])})},data:function(e,t){var n=this.attr("data-"+o(e),t);return null!==n?n:l},val:function(e){return e===l?this.length>0?this[0].value:l:this.each(function(t){this.value=c(this,e,t,this.value)})},offset:function(){if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:e.width,height:e.height}},css:function(e,t){if(t===l&&"string"==typeof e)return 0==this.length?l:this[0].style[y(e)]||w(this[0],"").getPropertyValue(e);var n="";for(p in e)"string"==typeof e[p]&&""==e[p]?this.each(function(){this.style.removeProperty(o(p))}):n+=o(p)+":"+s(p,e[p])+";";return"string"==typeof e&&(""==t?this.each(function(){this.style.removeProperty(o(e))}):n=o(e)+":"+s(e,t)),this.each(function(){this.style.cssText+=";"+n})},index:function(e){return e?this.indexOf(d(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!(this.length<1)&&a(e).test(this[0].className)},addClass:function(e){return this.each(function(t){h=[];var n=this.className;c(this,e,t,n).split(/\s+/g).forEach(function(e){d(this).hasClass(e)||h.push(e)},this),h.length&&(this.className+=(n?" ":"")+h.join(" "))})},removeClass:function(e){return this.each(function(t){if(e===l)return this.className="";h=this.className,c(this,e,t,h).split(/\s+/g).forEach(function(e){h=h.replace(a(e)," ")}),this.className=h.trim()})},toggleClass:function(e,t){return this.each(function(n){var r=c(this,e,n,this.className);(t===l?!d(this).hasClass(r):t)?d(this).addClass(r):d(this).removeClass(r)})}},["width","height"].forEach(function(e){d.fn[e]=function(t){var n,r=e.replace(/./,function(e){return e[0].toUpperCase()});return t===l?this[0]==window?window["inner"+r]:this[0]==P?P.documentElement["offset"+r]:(n=this.offset())&&n[e]:this.each(function(n){var r=d(this);r.css(e,c(this,t,n,r[e]()))})}}),["after","prepend","before","append"].forEach(function(e,n){d.fn[e]=function(){var e=d.map(arguments,function(e){return t(e)?e:L.fragment(e)});if(e.length<1)return this;var r=this.length,i=r>1,o=n<2;return this.each(function(t,a){for(var s=0;s<e.length;s++){var u=e[o?e.length-s-1:s];f(u,function(e){null!=e.nodeName&&"SCRIPT"===e.nodeName.toUpperCase()&&(!e.type||"text/javascript"===e.type)&&window.eval.call(window,e.innerHTML)}),i&&t<r-1&&(u=u.cloneNode(!0)),l=a,p=u,h=void 0,(h=(c=n)%2?l:l.parentNode)?h.insertBefore(p,c?1==c?h.firstChild:2==c?l:null:l.nextSibling):d(p).remove()}var c,l,p,h})},d.fn[n%2?e+"To":"insert"+(n?"Before":"After")]=function(t){return d(t)[e](this),this}}),L.Z.prototype=d.fn,L.camelize=y,L.uniq=v,d.zepto=L,d}();window.Zepto=Zepto,"$"in window||(window.$=Zepto),function(e){function t(e){return e._zid||(e._zid=c++)}function n(e,n,i,o){if((n=r(n)).ns)var a=(s=n.ns,new RegExp("(?:^| )"+s.replace(" "," .* ?")+"(?: |$)"));var s;return(u[t(e)]||[]).filter(function(e){return e&&(!n.e||e.e==n.e)&&(!n.ns||a.test(e.ns))&&(!i||t(e.fn)===t(i))&&(!o||e.sel==o)})}function r(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function i(t,n,r){e.isObject(t)?e.each(t,r):t.split(/\s/).forEach(function(e){r(e,n)})}function o(n,o,a,s,c,f){f=!!f;var l=t(n),p=u[l]||(u[l]=[]);i(o,a,function(t,i){var o=c&&c(i,t),a=o||i,u=function(e){var t=a.apply(n,[e].concat(e.data));return!1===t&&e.preventDefault(),t},l=e.extend(r(t),{fn:i,proxy:u,sel:s,del:o,i:p.length});p.push(l),n.addEventListener(l.e,u,f)})}function a(e,r,o,a){var s=t(e);i(r||"",o,function(t,r){n(e,t,r,a).forEach(function(t){delete u[s][t.i],e.removeEventListener(t.e,t.proxy,!1)})})}function s(t){var n=e.extend({originalEvent:t},t);return e.each(d,function(e,r){n[e]=function(){return this[r]=l,t[e].apply(t,arguments)},n[r]=p}),n}e.zepto.qsa;var u={},c=1,f={};f.click=f.mousedown=f.mouseup=f.mousemove="MouseEvents",e.event={add:o,remove:a},e.proxy=function(n,r){if(e.isFunction(n)){var i=function(){return n.apply(r,arguments)};return i._zid=t(n),i}if("string"==typeof r)return e.proxy(n[r],n);throw new TypeError("expected function")},e.fn.bind=function(e,t){return this.each(function(){o(this,e,t)})},e.fn.unbind=function(e,t){return this.each(function(){a(this,e,t)})},e.fn.one=function(e,t){return this.each(function(n,r){o(this,e,t,null,function(e,t){return function(){var n=e.apply(r,arguments);return a(r,t,e),n}})})};var l=function(){return!0},p=function(){return!1},d={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(t,n,r){var i=!1;return"blur"!=n&&"focus"!=n||(e.iswebkit?n="blur"==n?"focusout":"focus"==n?"focusin":n:i=!0),this.each(function(a,u){o(u,n,r,t,function(n){return function(r){var i,o=e(r.target).closest(t,u).get(0);if(o)return i=e.extend(s(r),{currentTarget:o,liveFired:u}),n.apply(o,[i].concat([].slice.call(arguments,1)))}},i)})},e.fn.undelegate=function(e,t,n){return this.each(function(){a(this,t,n,e)})},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,r){return null==n||e.isFunction(n)?this.bind(t,n):this.delegate(n,t,r)},e.fn.off=function(t,n,r){return null==n||e.isFunction(n)?this.unbind(t,n):this.undelegate(n,t,r)},e.fn.trigger=function(t,n){return"string"==typeof t&&(t=e.Event(t)),function(e){if(!("defaultPrevented"in e)){e.defaultPrevented=!1;var t=e.preventDefault;e.preventDefault=function(){this.defaultPrevented=!0,t.call(this)}}}(t),t.data=n,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(t)})},e.fn.triggerHandler=function(t,r){var i,o;return this.each(function(a,u){(i=s("string"==typeof t?e.Event(t):t)).data=r,i.target=u,e.each(n(u,t.type||t),function(e,t){if(o=t.proxy(i),i.isImmediatePropagationStopped())return!1})}),o},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return this.bind(t,e)}}),["focus","blur"].forEach(function(t){e.fn[t]=function(e){if(e)this.bind(t,e);else if(this.length)try{this.get(0)[t]()}catch(e){}return this}}),e.Event=function(e,t){var n=document.createEvent(f[e]||"Events"),r=!0;if(t)for(var i in t)"bubbles"==i?r=!!t[i]:n[i]=t[i];return n.initEvent(e,r,!0,null,null,null,null,null,null,null,null,null,null,null,null),n}}(Zepto),function(e){function t(e){var t=this.os={},n=this.browser={},r=e.match(/WebKit\/([\d.]+)/),i=e.match(/(Android)\s+([\d.]+)/),o=e.match(/(iPad).*OS\s([\d_]+)/),a=!o&&e.match(/(iPhone\sOS)\s([\d_]+)/),s=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),u=s&&e.match(/TouchPad/),c=e.match(/Kindle\/([\d.]+)/),f=e.match(/Silk\/([\d._]+)/),l=e.match(/(BlackBerry).*Version\/([\d.]+)/);(n.webkit=!!r)&&(n.version=r[1]),i&&(t.android=!0,t.version=i[2]),a&&(t.ios=t.iphone=!0,t.version=a[2].replace(/_/g,".")),o&&(t.ios=t.ipad=!0,t.version=o[2].replace(/_/g,".")),s&&(t.webos=!0,t.version=s[2]),u&&(t.touchpad=!0),l&&(t.blackberry=!0,t.version=l[2]),c&&(t.kindle=!0,t.version=c[1]),f&&(n.silk=!0,n.version=f[1]),!f&&t.android&&e.match(/Kindle Fire/)&&(n.silk=!0)}t.call(e,navigator.userAgent),e.__detect=t}(Zepto),function(e,t){function n(e){return e.toLowerCase()}function r(e){return i?i+e:n(e)}var i,o="",a=window.document.createElement("div"),s=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,u={};e.each({Webkit:"webkit",Moz:"",O:"o",ms:"MS"},function(e,r){if(a.style[e+"TransitionProperty"]!==t)return o="-"+n(e)+"-",i=r,!1}),u[o+"transition-property"]=u[o+"transition-duration"]=u[o+"transition-timing-function"]=u[o+"animation-name"]=u[o+"animation-duration"]="",e.fx={off:i===t&&a.style.transitionProperty===t,cssPrefix:o,transitionEnd:r("TransitionEnd"),animationEnd:r("AnimationEnd")},e.fn.animate=function(t,n,r,i){return e.isObject(n)&&(r=n.easing,i=n.complete,n=n.duration),n&&(n/=1e3),this.anim(t,n,r,i)},e.fn.anim=function(n,r,i,a){var c,f,l,p={},d=this,h=e.fx.transitionEnd;if(r===t&&(r=.4),e.fx.off&&(r=0),"string"==typeof n)p[o+"animation-name"]=n,p[o+"animation-duration"]=r+"s",h=e.fx.animationEnd;else{for(f in n)s.test(f)?(c||(c=[]),c.push(f+"("+n[f]+")")):p[f]=n[f];c&&(p[o+"transform"]=c.join(" ")),!e.fx.off&&"object"==(void 0===n?"undefined":_typeof(n))&&(p[o+"transition-property"]=Object.keys(n).join(", "),p[o+"transition-duration"]=r+"s",p[o+"transition-timing-function"]=i||"linear")}return l=function(t){if(void 0!==t){if(t.target!==t.currentTarget)return;e(t.target).unbind(h,arguments.callee)}e(this).css(u),a&&a.call(this)},r>0&&this.bind(h,l),setTimeout(function(){d.css(p),r<=0&&setTimeout(function(){d.each(function(){l.call(this)})},0)},0),this},a=null}(Zepto),function(e){function t(t,n,r,i){if(t.global)return o=n||p,a=r,s=i,u=e.Event(a),e(o).trigger(u,s),!u.defaultPrevented;var o,a,s,u}function n(e,n,r){var o=r.context,a="success";r.success.call(o,e,a,n),t(r,o,"ajaxSuccess",[n,r,e]),i(a,n,r)}function r(e,n,r,o){var a=o.context;o.error.call(a,r,n,e),t(o,a,"ajaxError",[r,o,e]),i(n,r,o)}function i(n,r,i){var o,a=i.context;i.complete.call(a,r,n),t(i,a,"ajaxComplete",[r,i]),(o=i).global&&!--e.active&&t(o,null,"ajaxStop")}function o(){}function a(e,t){return(e+"&"+t).replace(/[&?]{1,2}/,"?")}function s(t){l(t.data)&&(t.data=e.param(t.data)),t.data&&(!t.type||"GET"==t.type.toUpperCase())&&(t.url=a(t.url,t.data))}var u,c,f=0,l=e.isObject,p=window.document,d=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,h=/^(?:text|application)\/javascript/i,y=/^(?:text|application)\/xml/i,v="application/json",g="text/html",m=/^\s*$/;e.active=0,e.ajaxJSONP=function(t){var r,a="jsonp"+ ++f,u=p.createElement("script"),c={abort:function(){e(u).remove(),a in window&&(window[a]=o),i("abort",c,t)}};return t.error&&(u.onerror=function(){c.abort(),t.error()}),window[a]=function(i){clearTimeout(r),e(u).remove(),delete window[a],n(i,c,t)},s(t),u.src=t.url.replace(/=\?/,"="+a),e("head").append(u),t.timeout>0&&(r=setTimeout(function(){c.abort(),i("timeout",c,t)},t.timeout)),c},e.ajaxSettings={type:"GET",beforeSend:o,success:o,error:o,complete:o,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:v,xml:"application/xml, text/xml",html:g,text:"text/plain"},crossDomain:!1,timeout:0},e.ajax=function(i){var f,l=e.extend({},i||{});for(u in e.ajaxSettings)void 0===l[u]&&(l[u]=e.ajaxSettings[u]);(f=l).global&&0==e.active++&&t(f,null,"ajaxStart"),l.crossDomain||(l.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(l.url)&&RegExp.$2!=window.location.host);var p=l.dataType,d=/=\?/.test(l.url);if("jsonp"==p||d)return d||(l.url=a(l.url,"callback=?")),e.ajaxJSONP(l);l.url||(l.url=window.location.toString()),s(l);var P,_=l.accepts[p],b={},w=/^([\w-]+:)\/\//.test(l.url)?RegExp.$1:window.location.protocol,x=e.ajaxSettings.xhr();l.crossDomain||(b["X-Requested-With"]="XMLHttpRequest"),_&&(b.Accept=_,_.indexOf(",")>-1&&(_=_.split(",",2)[0]),x.overrideMimeType&&x.overrideMimeType(_)),(l.contentType||l.data&&"GET"!=l.type.toUpperCase())&&(b["Content-Type"]=l.contentType||"application/x-www-form-urlencoded"),l.headers=e.extend(b,l.headers||{}),x.onreadystatechange=function(){if(4==x.readyState){clearTimeout(P);var e,t=!1;if(x.status>=200&&x.status<300||304==x.status||0==x.status&&"file:"==w){p=p||((i=x.getResponseHeader("content-type"))&&(i==g?"html":i==v?"json":h.test(i)?"script":y.test(i)&&"xml")||"text"),e=x.responseText;try{"script"==p?(0,eval)(e):"xml"==p?e=x.responseXML:"json"==p&&(e=m.test(e)?null:JSON.parse(e))}catch(e){t=e}t?r(t,"parsererror",x,l):n(e,x,l)}else r(null,"error",x,l)}var i};var E=!("async"in l)||l.async;for(c in x.open(l.type,l.url,E),l.headers)x.setRequestHeader(c,l.headers[c]);return!1===function(e,n){var r=n.context;if(!1===n.beforeSend.call(r,e,n)||!1===t(n,r,"ajaxBeforeSend",[e,n]))return!1;t(n,r,"ajaxSend",[e,n])}(x,l)?(x.abort(),!1):(l.timeout>0&&(P=setTimeout(function(){x.onreadystatechange=o,x.abort(),r(null,"timeout",x,l)},l.timeout)),x.send(l.data?l.data:null),x)},e.get=function(t,n){return e.ajax({url:t,success:n})},e.post=function(t,n,r,i){return e.isFunction(n)&&(i=i||r,r=n,n=null),e.ajax({type:"POST",url:t,data:n,success:r,dataType:i})},e.getJSON=function(t,n){return e.ajax({url:t,success:n,dataType:"json"})},e.fn.load=function(t,n){if(!this.length)return this;var r,i=this,o=t.split(/\s/);return o.length>1&&(t=o[0],r=o[1]),e.get(t,function(t){i.html(r?e(p.createElement("div")).html(t.replace(d,"")).find(r).html():t),n&&n.call(i)}),this};var P=encodeURIComponent;e.param=function(t,n){var r=[];return r.add=function(e,t){this.push(P(e)+"="+P(t))},function t(n,r,i,o){var a=e.isArray(r);e.each(r,function(r,s){o&&(r=i?o:o+"["+(a?"":r)+"]"),!o&&a?n.add(s.name,s.value):(i?e.isArray(s):l(s))?t(n,s,i,r):n.add(r,s)})}(r,t,n),r.join("&").replace("%20","+")}}(Zepto),function(e){e.fn.serializeArray=function(){var t,n=[];return e(Array.prototype.slice.call(this.get(0).elements)).each(function(){var r=(t=e(this)).attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=r&&"reset"!=r&&"button"!=r&&("radio"!=r&&"checkbox"!=r||this.checked)&&n.push({name:t.attr("name"),value:t.val()})}),n},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.defaultPrevented||this.get(0).submit()}return this}}(Zepto),function(e){function t(){i=null,o.last&&(o.el.trigger("longTap"),o={})}function n(){i&&clearTimeout(i),i=null}var r,i,o={};e(document).ready(function(){var a,s;e(document.body).bind("touchstart",function(n){var u;a=Date.now(),s=a-(o.last||a),o.el=e("tagName"in(u=n.touches[0].target)?u:u.parentNode),r&&clearTimeout(r),o.x1=n.touches[0].pageX,o.y1=n.touches[0].pageY,s>0&&s<=250&&(o.isDoubleTap=!0),o.last=a,i=setTimeout(t,750)}).bind("touchmove",function(e){n(),o.x2=e.touches[0].pageX,o.y2=e.touches[0].pageY}).bind("touchend",function(e){var t,i,a,s;n(),o.isDoubleTap?(o.el.trigger("doubleTap"),o={}):o.x2&&Math.abs(o.x1-o.x2)>30||o.y2&&Math.abs(o.y1-o.y2)>30?(o.el.trigger("swipe")&&o.el.trigger("swipe"+(t=o.x1,i=o.x2,a=o.y1,s=o.y2,Math.abs(t-i)>=Math.abs(a-s)?t-i>0?"Left":"Right":a-s>0?"Up":"Down")),o={}):"last"in o&&(o.el.trigger("tap"),r=setTimeout(function(){r=null,o.el.trigger("singleTap"),o={}},250))}).bind("touchcancel",function(){r&&clearTimeout(r),i&&clearTimeout(i),i=r=null,o={}})}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.bind(t,e)}})}(Zepto),$(function(e,t){e=$("input[name=title]"),t=$("input[name=name]");var n=!1;t.bind("keyup",function(){n=!0}),e.bind("keyup",function(){n||t.val(e.val())})}),$(function(){var e=$("fieldset.redirect"),t=$("input[name=redirect]");$("button.secondary.redirector").bind("click",function(){return e.toggleClass("show"),e.hasClass("show")?t.removeAttr("tabindex"):t.attr("tabindex","-1"),!1}),t.change(function(){""===t.val()&&e.removeClass("show")}),""!==t.val()&&e.addClass("show"),t.hasClass("show")||t.attr("tabindex",-1)}),$(function(){var e=$("input[name=title]"),t=$("input[name=slug]"),n=t.val(),r=function(e){var t;e=String(e);_defineProperty2(t={"©":"(c)","Á":"A","á":"a","À":"A","à":"a","Â":"A","â":"a","Å":"A","å":"a","Ä":"Ae","ä":"ae","Ã":"A","ã":"a","Ą":"A","ą":"a","Ā":"A","ā":"a","Æ":"AE","æ":"ae","Ć":"C","ć":"c","Č":"C","č":"c","Ç":"C","ç":"c","Ď":"D","ď":"d","Ð":"D","ð":"d","É":"E","é":"e","È":"E","è":"e","Ê":"E","ê":"e","Ě":"E","ě":"e","Ë":"E","ë":"e","Ę":"e","ę":"e","Ē":"E","ē":"e","Ğ":"G","ğ":"g","Ģ":"G","ģ":"g","Í":"I","í":"i","Ì":"I","ì":"i","Î":"I","î":"i","Ï":"I","ï":"i","İ":"I","Ī":"i","ī":"i","ı":"i","Ķ":"k","ķ":"k","Ļ":"L","ļ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ň":"N","ň":"n","Ñ":"N","ñ":"n","Ņ":"N","ņ":"n","Ó":"O"},"Ó","o"),_defineProperty2(t,"ó","o"),_defineProperty2(t,"Ò","O"),_defineProperty2(t,"ò","o"),_defineProperty2(t,"Ô","O"),_defineProperty2(t,"ô","o"),_defineProperty2(t,"Ö","Oe"),_defineProperty2(t,"ö","oe"),_defineProperty2(t,"Ő","O"),_defineProperty2(t,"ő","o"),_defineProperty2(t,"Õ","O"),_defineProperty2(t,"õ","o"),_defineProperty2(t,"Ø","O"),_defineProperty2(t,"ø","o"),_defineProperty2(t,"Ř","R"),_defineProperty2(t,"ř","r"),_defineProperty2(t,"Ś","S"),_defineProperty2(t,"ś","s"),_defineProperty2(t,"Š","S"),_defineProperty2(t,"š","s"),_defineProperty2(t,"Ş","S"),_defineProperty2(t,"ş","s"),_defineProperty2(t,"ß","ss"),_defineProperty2(t,"Ť","T"),_defineProperty2(t,"ť","t"),_defineProperty2(t,"Ú","U"),_defineProperty2(t,"ú","u"),_defineProperty2(t,"Ù","U"),_defineProperty2(t,"ù","u"),_defineProperty2(t,"Û","U"),_defineProperty2(t,"û","u"),_defineProperty2(t,"Ů","U"),_defineProperty2(t,"ů","u"),_defineProperty2(t,"Ü","Ue"),_defineProperty2(t,"ü","ue"),_defineProperty2(t,"Ű","U"),_defineProperty2(t,"ű","u"),_defineProperty2(t,"Ū","u"),_defineProperty2(t,"ū","u"),_defineProperty2(t,"Ý","Y"),_defineProperty2(t,"ý","y"),_defineProperty2(t,"ÿ","y"),_defineProperty2(t,"Ź","Z"),_defineProperty2(t,"ź","z"),_defineProperty2(t,"Ž","Z"),_defineProperty2(t,"ž","z"),_defineProperty2(t,"Ż","Z"),_defineProperty2(t,"ż","z"),_defineProperty2(t,"Þ","TH"),_defineProperty2(t,"þ","th"),_defineProperty2(t,"Α","A"),_defineProperty2(t,"α","a"),_defineProperty2(t,"Ά","A"),_defineProperty2(t,"ά","a"),_defineProperty2(t,"Β","B"),_defineProperty2(t,"β","b"),_defineProperty2(t,"Γ","G"),_defineProperty2(t,"γ","g"),_defineProperty2(t,"Δ","D"),_defineProperty2(t,"δ","d"),_defineProperty2(t,"Ε","E"),_defineProperty2(t,"ε","e"),_defineProperty2(t,"Έ","E"),_defineProperty2(t,"έ","e"),_defineProperty2(t,"Ζ","Z"),_defineProperty2(t,"ζ","z"),_defineProperty2(t,"Η","H"),_defineProperty2(t,"η","h"),_defineProperty2(t,"Ή","H"),_defineProperty2(t,"ή","h"),_defineProperty2(t,"Θ","8"),_defineProperty2(t,"θ","8"),_defineProperty2(t,"Ι","I"),_defineProperty2(t,"ι","i"),_defineProperty2(t,"Ί","I"),_defineProperty2(t,"ί","i"),_defineProperty2(t,"Ϊ","I"),_defineProperty2(t,"ϊ","i"),_defineProperty2(t,"ΐ","i"),_defineProperty2(t,"Κ","K"),_defineProperty2(t,"κ","k"),_defineProperty2(t,"Λ","L"),_defineProperty2(t,"λ","l"),_defineProperty2(t,"Μ","M"),_defineProperty2(t,"μ","m"),_defineProperty2(t,"Ν","N"),_defineProperty2(t,"ν","n"),_defineProperty2(t,"Ξ","3"),_defineProperty2(t,"ξ","3"),_defineProperty2(t,"Ο","O"),_defineProperty2(t,"ο","o"),_defineProperty2(t,"Ό","O"),_defineProperty2(t,"ό","o"),_defineProperty2(t,"Π","P"),_defineProperty2(t,"π","p"),_defineProperty2(t,"Ρ","R"),_defineProperty2(t,"ρ","r"),_defineProperty2(t,"Σ","S"),_defineProperty2(t,"ς","s"),_defineProperty2(t,"σ","s"),_defineProperty2(t,"Τ","T"),_defineProperty2(t,"τ","t"),_defineProperty2(t,"Υ","Y"),_defineProperty2(t,"υ","y"),_defineProperty2(t,"Ύ","Y"),_defineProperty2(t,"ύ","y"),_defineProperty2(t,"Ϋ","Y"),_defineProperty2(t,"ϋ","y"),_defineProperty2(t,"ΰ","y"),_defineProperty2(t,"Φ","F"),_defineProperty2(t,"φ","f"),_defineProperty2(t,"Χ","X"),_defineProperty2(t,"χ","x"),_defineProperty2(t,"Ψ","PS"),_defineProperty2(t,"ψ","ps"),_defineProperty2(t,"Ω","W"),_defineProperty2(t,"ω","w"),_defineProperty2(t,"Ώ","W"),_defineProperty2(t,"ώ","w"),_defineProperty2(t,"А","A"),_defineProperty2(t,"а","a"),_defineProperty2(t,"Б","B"),_defineProperty2(t,"б","b"),_defineProperty2(t,"В","V"),_defineProperty2(t,"в","v"),_defineProperty2(t,"Г","G"),_defineProperty2(t,"г","g"),_defineProperty2(t,"Ґ","G"),_defineProperty2(t,"Д","D"),_defineProperty2(t,"д","d"),_defineProperty2(t,"Е","E"),_defineProperty2(t,"е","e"),_defineProperty2(t,"Ё","Yo"),_defineProperty2(t,"ё","yo"),_defineProperty2(t,"Є","Ye"),_defineProperty2(t,"є","ye"),_defineProperty2(t,"Ж","Zh"),_defineProperty2(t,"ж","zh"),_defineProperty2(t,"З","Z"),_defineProperty2(t,"з","z"),_defineProperty2(t,"И","I"),_defineProperty2(t,"и","i"),_defineProperty2(t,"І","I"),_defineProperty2(t,"і","i"),_defineProperty2(t,"Ї","Yi"),_defineProperty2(t,"ї","yi"),_defineProperty2(t,"Й","J"),_defineProperty2(t,"й","j"),_defineProperty2(t,"К","K"),_defineProperty2(t,"к","k"),_defineProperty2(t,"Л","L"),_defineProperty2(t,"л","l"),_defineProperty2(t,"М","M"),_defineProperty2(t,"м","m"),_defineProperty2(t,"Н","N"),_defineProperty2(t,"н","n"),_defineProperty2(t,"О","O"),_defineProperty2(t,"о","o"),_defineProperty2(t,"П","P"),_defineProperty2(t,"п","p"),_defineProperty2(t,"Р","R"),_defineProperty2(t,"р","r"),_defineProperty2(t,"С","S"),_defineProperty2(t,"с","s"),_defineProperty2(t,"Т","T"),_defineProperty2(t,"т","t"),_defineProperty2(t,"У","U"),_defineProperty2(t,"у","u"),_defineProperty2(t,"Ф","F"),_defineProperty2(t,"ф","f"),_defineProperty2(t,"Х","H"),_defineProperty2(t,"х","h"),_defineProperty2(t,"Ц","C"),_defineProperty2(t,"ц","c"),_defineProperty2(t,"Ч","Ch"),_defineProperty2(t,"ч","ch"),_defineProperty2(t,"Ш","Sh"),_defineProperty2(t,"ш","sh"),_defineProperty2(t,"Щ","Sh"),_defineProperty2(t,"щ","sh"),_defineProperty2(t,"Ы","Y"),_defineProperty2(t,"ы","y"),_defineProperty2(t,"Э","E"),_defineProperty2(t,"э","e"),_defineProperty2(t,"Ю","Yu"),_defineProperty2(t,"ю","yu"),_defineProperty2(t,"Я","Ya"),_defineProperty2(t,"я","ya");for(var n=["À","Á","Â","Ã","Ä","Å","Æ","Ç","È","É","Ê","Ë","Ì","Í","Î","Ï","Ð","Ñ","Ò","Ó","Ô","Õ","Ö","Ø","Ù","Ú","Û","Ü","Ý","ß","à","á","â","ã","ä","å","æ","ç","è","é","ê","ë","ì","í","î","ï","ñ","ò","ó","ô","õ","ö","ø","ù","ú","û","ü","ý","ÿ","Ā","ā","Ă","ă","Ą","ą","Ć","ć","Ĉ","ĉ","Ċ","ċ","Č","č","Ď","ď","Đ","đ","Ē","ē","Ĕ","ĕ","Ė","ė","Ę","ę","Ě","ě","Ĝ","ĝ","Ğ","ğ","Ġ","ġ","Ģ","ģ","Ĥ","ĥ","Ħ","ħ","Ĩ","ĩ","Ī","ī","Ĭ","ĭ","Į","į","İ","ı","Ĳ","ĳ","Ĵ","ĵ","Ķ","ķ","Ĺ","ĺ","Ļ","ļ","Ľ","ľ","Ŀ","ŀ","Ł","ł","Ń","ń","Ņ","ņ","Ň","ň","ŉ","Ō","ō","Ŏ","ŏ","Ő","ő","Œ","œ","Ŕ","ŕ","Ŗ","ŗ","Ř","ř","Ś","ś","Ŝ","ŝ","Ş","ş","Š","š","Ţ","ţ","Ť","ť","Ŧ","ŧ","Ũ","ũ","Ū","ū","Ŭ","ŭ","Ů","ů","Ű","ű","Ų","ų","Ŵ","ŵ","Ŷ","ŷ","Ÿ","Ź","ź","Ż","ż","Ž","ž","ſ","ƒ","Ơ","ơ","Ư","ư","Ǎ","ǎ","Ǐ","ǐ","Ǒ","ǒ","Ǔ","ǔ","Ǖ","ǖ","Ǘ","ǘ","Ǚ","ǚ","Ǜ","ǜ","Ǻ","ǻ","Ǽ","ǽ","Ǿ","ǿ","·","/","_",",",":",";"],r=["A","A","A","A","A","A","AE","C","E","E","E","E","I","I","I","I","D","N","O","O","O","O","O","O","U","U","U","U","Y","s","a","a","a","a","a","a","ae","c","e","e","e","e","i","i","i","i","n","o","o","o","o","o","o","u","u","u","u","y","y","A","a","A","a","A","a","C","c","C","c","C","c","C","c","D","d","D","d","E","e","E","e","E","e","E","e","E","e","G","g","G","g","G","g","G","g","H","h","H","h","I","i","I","i","I","i","I","i","I","i","IJ","ij","J","j","K","k","L","l","L","l","L","l","L","l","l","l","N","n","N","n","N","n","n","O","o","O","o","O","o","OE","oe","R","r","R","r","R","r","S","s","S","s","S","s","S","s","T","t","T","t","T","t","U","u","U","u","U","u","U","u","U","u","U","u","W","w","Y","y","Y","Z","z","Z","z","Z","z","s","f","O","o","U","u","A","a","I","i","O","o","U","u","U","u","U","u","U","u","U","u","A","a","AE","ae","O","o","-","-","-","-","-","-"],i=0;i<n.length;i++)e=e.replace(new RegExp(n[i],"g"),r[i]);return e.toLowerCase().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")};t.bind("focus",function(){t.val(),n=t.val()}),t.bind("blur",function(){""==t.val()?t.val(r(e.val())):t.val(r(t.val()))}),e.bind("keyup",function(){""==n&&t.val(r(e.val()))})}),function(e){e.fn.sortable=function(t){var n,r=e.extend({},{element:"li",dropped:function(){}},t),i=e(this).find(r.element);i.on("dragstart",function(t){e(this).addClass("moving"),n=this,t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/html",this.innerHTML)}),i.on("dragenter",function(){e(this).addClass("over")}),i.on("dragover",function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="move"}),i.on("dragleave",function(){e(this).removeClass("over")}),i.on("drop",function(e){e.preventDefault(),e.stopPropagation(),n!=this&&(n.innerHTML=this.innerHTML,this.innerHTML=e.dataTransfer.getData("text/html")),r.dropped()}),i.on("dragend",function(){e(this).removeClass("moving"),i.removeClass("over")})}}(Zepto),$(function(){var e=$("textarea").first();function t(t){var n=window.pageYOffset;e.height(e.prop("scrollHeight")+"px"),window.scrollTo(0,n)}e.on("change",t),e.on("cut paste drop keydown",function(e){window.setTimeout(function(){t()},0)}),e.focus(),e.select(),t()}),$(function(){if(window.XMLHttpRequest)var e=new XMLHttpRequest;else if(window.ActiveXObject)try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}$("input[type=file]").bind("change",function(){var e=$(this);e.parent().parent().find(".current-file").html(e.val().replace(/\\/g,"/").replace(/.*\//,""));new FormData;for(var n=this.files,r=0;r<n.length;r++){var i=n[r];if(-1!==["image/jpeg","image/gif","image/png","image/bmp","application/pdf"].indexOf(i.type)){var o=window.location.pathname,a=o.split("/");if("add"==a[a.length-1])var s=o.split("/").slice(0,-2).join("/")+"/upload";else s=o.split("/").slice(0,-3).join("/")+"/upload";t(s,i,this)}}});var t=function(t,n,r){e.open("post",t);var i=new FormData;i.append("file",n),e.onreadystatechange=function(){if(4==this.readyState){console.log("Uploaded");var e=JSON.parse(this.responseText);console.log(e),$(r).parent().append('<input type="hidden" name="'+$(r).attr("name")+'" value="'+e.uri+'">')}},e.upload?e.upload.onprogress=function(e){console.log(e.position+":"+e.total)}:e.addEventListener("progress",function(e){console.log(e.position+":"+e.total)},!1),e.send(i)}}),function(e){String.prototype.trim===e&&(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Array.prototype.reduce===e&&(Array.prototype.reduce=function(t){if(null==this)throw new TypeError;var n,r=Object(this),i=r.length>>>0,o=0;if("function"!=typeof t)throw new TypeError;if(0==i&&1==arguments.length)throw new TypeError;if(arguments.length>=2)n=arguments[1];else for(;;){if(o in r){n=r[o++];break}if(++o>=i)throw new TypeError}for(;o<i;)o in r&&(n=t.call(e,n,r[o],o,r)),o++;return n})}();Zepto=function(){function e(e){return"[object Function]"==N.call(e)}function t(e){return e instanceof Object}function n(t){var n,r;if("[object Object]"!==N.call(t))return!1;if(!(r=e(t.constructor)&&t.constructor.prototype)||!hasOwnProperty.call(r,"isPrototypeOf"))return!1;for(n in t);return n===l||hasOwnProperty.call(t,n)}function r(e){return e instanceof Array}function i(e){return"number"==typeof e.length}function o(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function a(e){return e in b?b[e]:b[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function s(e,t){return"number"!=typeof t||x[o(e)]?t:t+"px"}function u(e,t){return t===l?d(e):d(e).filter(t)}function c(t,n,r,i){return e(n)?n.call(t,r,i):n}function f(e,t){for(var n in t(e),e.childNodes)f(e.childNodes[n],t)}var l,p,d,h,y,v,g=[],m=g.slice,P=window.document,_={},b={},w=P.defaultView.getComputedStyle,x={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},E=/^\s*<(\w+|!)[^>]*>/,S=[1,3,8,9,11],T=P.createElement("table"),O=P.createElement("tr"),C={tr:P.createElement("tbody"),tbody:T,thead:T,tfoot:T,td:O,th:O,"*":P.createElement("div")},j=/complete|loaded|interactive/,$=/^\.([\w-]+)$/,A=/^#([\w-]+)$/,k=/^[\w-]+$/,N={}.toString,L={},U=P.createElement("div");return L.matches=function(e,t){if(!e||1!==e.nodeType)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,i=e.parentNode,o=!i;return o&&(i=U).appendChild(e),r=~L.qsa(i,t).indexOf(e),o&&U.removeChild(e),r},y=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},v=function(e){return e.filter(function(t,n){return e.indexOf(t)==n})},L.fragment=function(e,t){t===l&&(t=E.test(e)&&RegExp.$1),t in C||(t="*");var n=C[t];return n.innerHTML=""+e,d.each(m.call(n.childNodes),function(){n.removeChild(this)})},L.Z=function(e,t){return(e=e||[]).__proto__=arguments.callee.prototype,e.selector=t||"",e},L.isZ=function(e){return e instanceof L.Z},L.init=function(t,i){if(!t)return L.Z();if(e(t))return d(P).ready(t);if(L.isZ(t))return t;var o;if(r(t))o=t.filter(function(e){return e!==l&&null!==e});else if(n(t))o=[d.extend({},t)],t=null;else if(S.indexOf(t.nodeType)>=0||t===window)o=[t],t=null;else if(E.test(t))o=L.fragment(t.trim(),RegExp.$1),t=null;else{if(i!==l)return d(i).find(t);o=L.qsa(P,t)}return L.Z(o,t)},(d=function(e,t){return L.init(e,t)}).extend=function(e){return m.call(arguments,1).forEach(function(t){for(p in t)t[p]!==l&&(e[p]=t[p])}),e},L.qsa=function(e,t){var n;return e===P&&A.test(t)?(n=e.getElementById(RegExp.$1))?[n]:g:1!==e.nodeType&&9!==e.nodeType?g:m.call($.test(t)?e.getElementsByClassName(RegExp.$1):k.test(t)?e.getElementsByTagName(t):e.querySelectorAll(t))},d.isFunction=e,d.isObject=t,d.isArray=r,d.isPlainObject=n,d.inArray=function(e,t,n){return g.indexOf.call(t,e,n)},d.trim=function(e){return e.trim()},d.uuid=0,d.map=function(e,t){var n,r,o,a,s=[];if(i(e))for(r=0;r<e.length;r++)null!=(n=t(e[r],r))&&s.push(n);else for(o in e)null!=(n=t(e[o],o))&&s.push(n);return(a=s).length>0?[].concat.apply([],a):a},d.each=function(e,t){var n,r;if(i(e)){for(n=0;n<e.length;n++)if(!1===t.call(e[n],n,e[n]))return e}else for(r in e)if(!1===t.call(e[r],r,e[r]))return e;return e},d.fn={forEach:g.forEach,reduce:g.reduce,push:g.push,indexOf:g.indexOf,concat:g.concat,map:function(e){return d.map(this,function(t,n){return e.call(t,n,t)})},slice:function(){return d(m.apply(this,arguments))},ready:function(e){return j.test(P.readyState)?e(d):P.addEventListener("DOMContentLoaded",function(){e(d)},!1),this},get:function(e){return e===l?m.call(this):this[e]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return this.forEach(function(t,n){e.call(t,n,t)}),this},filter:function(e){return d([].filter.call(this,function(t){return L.matches(t,e)}))},add:function(e,t){return d(v(this.concat(d(e,t))))},is:function(e){return this.length>0&&L.matches(this[0],e)},not:function(t){var n=[];if(e(t)&&t.call!==l)this.each(function(e){t.call(this,e)||n.push(this)});else{var r="string"==typeof t?this.filter(t):i(t)&&e(t.item)?m.call(t):d(t);this.forEach(function(e){r.indexOf(e)<0&&n.push(e)})}return d(n)},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!t(e)?e:d(e)},last:function(){var e=this[this.length-1];return e&&!t(e)?e:d(e)},find:function(e){var t;return t=1==this.length?L.qsa(this[0],e):this.map(function(){return L.qsa(this,e)}),d(t)},closest:function(e,t){for(var n=this[0];n&&!L.matches(n,e);)n=n!==t&&n!==P&&n.parentNode;return d(n)},parents:function(e){for(var t=[],n=this;n.length>0;)n=d.map(n,function(e){if((e=e.parentNode)&&e!==P&&t.indexOf(e)<0)return t.push(e),e});return u(t,e)},parent:function(e){return u(v(this.pluck("parentNode")),e)},children:function(e){return u(this.map(function(){return m.call(this.children)}),e)},siblings:function(e){return u(this.map(function(e,t){return m.call(t.parentNode.children).filter(function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return this.map(function(){return this[e]})},show:function(){return this.each(function(){var e,t,n;"none"==this.style.display&&(this.style.display=null),"none"==w(this,"").getPropertyValue("display")&&(this.style.display=(e=this.nodeName,_[e]||(t=P.createElement(e),P.body.appendChild(t),n=w(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),_[e]=n),_[e]))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return this.each(function(){d(this).wrapAll(d(e)[0].cloneNode(!1))})},wrapAll:function(e){return this[0]&&(d(this[0]).before(e=d(e)),e.append(this)),this},unwrap:function(){return this.parent().each(function(){d(this).replaceWith(d(this).children())}),this},clone:function(){return d(this.map(function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(e){return(e===l?"none"==this.css("display"):e)?this.show():this.hide()},prev:function(){return d(this.pluck("previousElementSibling"))},next:function(){return d(this.pluck("nextElementSibling"))},html:function(e){return e===l?this.length>0?this[0].innerHTML:null:this.each(function(t){var n=this.innerHTML;d(this).empty().append(c(this,e,t,n))})},text:function(e){return e===l?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=e})},attr:function(e,n){var r;return"string"==typeof e&&n===l?0==this.length||1!==this[0].nodeType?l:"value"==e&&"INPUT"==this[0].nodeName?this.val():!(r=this[0].getAttribute(e))&&e in this[0]?this[0][e]:r:this.each(function(r){if(1===this.nodeType)if(t(e))for(p in e)this.setAttribute(p,e[p]);else this.setAttribute(e,c(this,n,r,this.getAttribute(e)))})},removeAttr:function(e){return this.each(function(){1===this.nodeType&&this.removeAttribute(e)})},prop:function(e,t){return t===l?this[0]?this[0][e]:l:this.each(function(n){this[e]=c(this,t,n,this[e])})},data:function(e,t){var n=this.attr("data-"+o(e),t);return null!==n?n:l},val:function(e){return e===l?this.length>0?this[0].value:l:this.each(function(t){this.value=c(this,e,t,this.value)})},offset:function(){if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:e.width,height:e.height}},css:function(e,t){if(t===l&&"string"==typeof e)return 0==this.length?l:this[0].style[y(e)]||w(this[0],"").getPropertyValue(e);var n="";for(p in e)"string"==typeof e[p]&&""==e[p]?this.each(function(){this.style.removeProperty(o(p))}):n+=o(p)+":"+s(p,e[p])+";";return"string"==typeof e&&(""==t?this.each(function(){this.style.removeProperty(o(e))}):n=o(e)+":"+s(e,t)),this.each(function(){this.style.cssText+=";"+n})},index:function(e){return e?this.indexOf(d(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!(this.length<1)&&a(e).test(this[0].className)},addClass:function(e){return this.each(function(t){h=[];var n=this.className;c(this,e,t,n).split(/\s+/g).forEach(function(e){d(this).hasClass(e)||h.push(e)},this),h.length&&(this.className+=(n?" ":"")+h.join(" "))})},removeClass:function(e){return this.each(function(t){if(e===l)return this.className="";h=this.className,c(this,e,t,h).split(/\s+/g).forEach(function(e){h=h.replace(a(e)," ")}),this.className=h.trim()})},toggleClass:function(e,t){return this.each(function(n){var r=c(this,e,n,this.className);(t===l?!d(this).hasClass(r):t)?d(this).addClass(r):d(this).removeClass(r)})}},["width","height"].forEach(function(e){d.fn[e]=function(t){var n,r=e.replace(/./,function(e){return e[0].toUpperCase()});return t===l?this[0]==window?window["inner"+r]:this[0]==P?P.documentElement["offset"+r]:(n=this.offset())&&n[e]:this.each(function(n){var r=d(this);r.css(e,c(this,t,n,r[e]()))})}}),["after","prepend","before","append"].forEach(function(e,n){d.fn[e]=function(){var e=d.map(arguments,function(e){return t(e)?e:L.fragment(e)});if(e.length<1)return this;var r=this.length,i=r>1,o=n<2;return this.each(function(t,a){for(var s=0;s<e.length;s++){var u=e[o?e.length-s-1:s];f(u,function(e){null!=e.nodeName&&"SCRIPT"===e.nodeName.toUpperCase()&&(!e.type||"text/javascript"===e.type)&&window.eval.call(window,e.innerHTML)}),i&&t<r-1&&(u=u.cloneNode(!0)),l=a,p=u,h=void 0,(h=(c=n)%2?l:l.parentNode)?h.insertBefore(p,c?1==c?h.firstChild:2==c?l:null:l.nextSibling):d(p).remove()}var c,l,p,h})},d.fn[n%2?e+"To":"insert"+(n?"Before":"After")]=function(t){return d(t)[e](this),this}}),L.Z.prototype=d.fn,L.camelize=y,L.uniq=v,d.zepto=L,d}();window.Zepto=Zepto,"$"in window||(window.$=Zepto),function(e){function t(e){return e._zid||(e._zid=c++)}function n(e,n,i,o){if((n=r(n)).ns)var a=(s=n.ns,new RegExp("(?:^| )"+s.replace(" "," .* ?")+"(?: |$)"));var s;return(u[t(e)]||[]).filter(function(e){return e&&(!n.e||e.e==n.e)&&(!n.ns||a.test(e.ns))&&(!i||t(e.fn)===t(i))&&(!o||e.sel==o)})}function r(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function i(t,n,r){e.isObject(t)?e.each(t,r):t.split(/\s/).forEach(function(e){r(e,n)})}function o(n,o,a,s,c,f){f=!!f;var l=t(n),p=u[l]||(u[l]=[]);i(o,a,function(t,i){var o=c&&c(i,t),a=o||i,u=function(e){var t=a.apply(n,[e].concat(e.data));return!1===t&&e.preventDefault(),t},l=e.extend(r(t),{fn:i,proxy:u,sel:s,del:o,i:p.length});p.push(l),n.addEventListener(l.e,u,f)})}function a(e,r,o,a){var s=t(e);i(r||"",o,function(t,r){n(e,t,r,a).forEach(function(t){delete u[s][t.i],e.removeEventListener(t.e,t.proxy,!1)})})}function s(t){var n=e.extend({originalEvent:t},t);return e.each(d,function(e,r){n[e]=function(){return this[r]=l,t[e].apply(t,arguments)},n[r]=p}),n}e.zepto.qsa;var u={},c=1,f={};f.click=f.mousedown=f.mouseup=f.mousemove="MouseEvents",e.event={add:o,remove:a},e.proxy=function(n,r){if(e.isFunction(n)){var i=function(){return n.apply(r,arguments)};return i._zid=t(n),i}if("string"==typeof r)return e.proxy(n[r],n);throw new TypeError("expected function")},e.fn.bind=function(e,t){return this.each(function(){o(this,e,t)})},e.fn.unbind=function(e,t){return this.each(function(){a(this,e,t)})},e.fn.one=function(e,t){return this.each(function(n,r){o(this,e,t,null,function(e,t){return function(){var n=e.apply(r,arguments);return a(r,t,e),n}})})};var l=function(){return!0},p=function(){return!1},d={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(t,n,r){var i=!1;return"blur"!=n&&"focus"!=n||(e.iswebkit?n="blur"==n?"focusout":"focus"==n?"focusin":n:i=!0),this.each(function(a,u){o(u,n,r,t,function(n){return function(r){var i,o=e(r.target).closest(t,u).get(0);if(o)return i=e.extend(s(r),{currentTarget:o,liveFired:u}),n.apply(o,[i].concat([].slice.call(arguments,1)))}},i)})},e.fn.undelegate=function(e,t,n){return this.each(function(){a(this,t,n,e)})},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,r){return null==n||e.isFunction(n)?this.bind(t,n):this.delegate(n,t,r)},e.fn.off=function(t,n,r){return null==n||e.isFunction(n)?this.unbind(t,n):this.undelegate(n,t,r)},e.fn.trigger=function(t,n){return"string"==typeof t&&(t=e.Event(t)),function(e){if(!("defaultPrevented"in e)){e.defaultPrevented=!1;var t=e.preventDefault;e.preventDefault=function(){this.defaultPrevented=!0,t.call(this)}}}(t),t.data=n,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(t)})},e.fn.triggerHandler=function(t,r){var i,o;return this.each(function(a,u){(i=s("string"==typeof t?e.Event(t):t)).data=r,i.target=u,e.each(n(u,t.type||t),function(e,t){if(o=t.proxy(i),i.isImmediatePropagationStopped())return!1})}),o},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return this.bind(t,e)}}),["focus","blur"].forEach(function(t){e.fn[t]=function(e){if(e)this.bind(t,e);else if(this.length)try{this.get(0)[t]()}catch(e){}return this}}),e.Event=function(e,t){var n=document.createEvent(f[e]||"Events"),r=!0;if(t)for(var i in t)"bubbles"==i?r=!!t[i]:n[i]=t[i];return n.initEvent(e,r,!0,null,null,null,null,null,null,null,null,null,null,null,null),n}}(Zepto),function(e){function t(e){var t=this.os={},n=this.browser={},r=e.match(/WebKit\/([\d.]+)/),i=e.match(/(Android)\s+([\d.]+)/),o=e.match(/(iPad).*OS\s([\d_]+)/),a=!o&&e.match(/(iPhone\sOS)\s([\d_]+)/),s=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),u=s&&e.match(/TouchPad/),c=e.match(/Kindle\/([\d.]+)/),f=e.match(/Silk\/([\d._]+)/),l=e.match(/(BlackBerry).*Version\/([\d.]+)/);(n.webkit=!!r)&&(n.version=r[1]),i&&(t.android=!0,t.version=i[2]),a&&(t.ios=t.iphone=!0,t.version=a[2].replace(/_/g,".")),o&&(t.ios=t.ipad=!0,t.version=o[2].replace(/_/g,".")),s&&(t.webos=!0,t.version=s[2]),u&&(t.touchpad=!0),l&&(t.blackberry=!0,t.version=l[2]),c&&(t.kindle=!0,t.version=c[1]),f&&(n.silk=!0,n.version=f[1]),!f&&t.android&&e.match(/Kindle Fire/)&&(n.silk=!0)}t.call(e,navigator.userAgent),e.__detect=t}(Zepto),function(e,t){function n(e){return e.toLowerCase()}function r(e){return i?i+e:n(e)}var i,o="",a=window.document.createElement("div"),s=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,u={};e.each({Webkit:"webkit",Moz:"",O:"o",ms:"MS"},function(e,r){if(a.style[e+"TransitionProperty"]!==t)return o="-"+n(e)+"-",i=r,!1}),u[o+"transition-property"]=u[o+"transition-duration"]=u[o+"transition-timing-function"]=u[o+"animation-name"]=u[o+"animation-duration"]="",e.fx={off:i===t&&a.style.transitionProperty===t,cssPrefix:o,transitionEnd:r("TransitionEnd"),animationEnd:r("AnimationEnd")},e.fn.animate=function(t,n,r,i){return e.isObject(n)&&(r=n.easing,i=n.complete,n=n.duration),n&&(n/=1e3),this.anim(t,n,r,i)},e.fn.anim=function(n,r,i,a){var c,f,l,p={},d=this,h=e.fx.transitionEnd;if(r===t&&(r=.4),e.fx.off&&(r=0),"string"==typeof n)p[o+"animation-name"]=n,p[o+"animation-duration"]=r+"s",h=e.fx.animationEnd;else{for(f in n)s.test(f)?(c||(c=[]),c.push(f+"("+n[f]+")")):p[f]=n[f];c&&(p[o+"transform"]=c.join(" ")),!e.fx.off&&"object"==(void 0===n?"undefined":_typeof2(n))&&(p[o+"transition-property"]=Object.keys(n).join(", "),p[o+"transition-duration"]=r+"s",p[o+"transition-timing-function"]=i||"linear")}return l=function(t){if(void 0!==t){if(t.target!==t.currentTarget)return;e(t.target).unbind(h,arguments.callee)}e(this).css(u),a&&a.call(this)},r>0&&this.bind(h,l),setTimeout(function(){d.css(p),r<=0&&setTimeout(function(){d.each(function(){l.call(this)})},0)},0),this},a=null}(Zepto),function(e){function t(t,n,r,i){if(t.global)return o=n||p,a=r,s=i,u=e.Event(a),e(o).trigger(u,s),!u.defaultPrevented;var o,a,s,u}function n(e,n,r){var o=r.context,a="success";r.success.call(o,e,a,n),t(r,o,"ajaxSuccess",[n,r,e]),i(a,n,r)}function r(e,n,r,o){var a=o.context;o.error.call(a,r,n,e),t(o,a,"ajaxError",[r,o,e]),i(n,r,o)}function i(n,r,i){var o,a=i.context;i.complete.call(a,r,n),t(i,a,"ajaxComplete",[r,i]),(o=i).global&&!--e.active&&t(o,null,"ajaxStop")}function o(){}function a(e,t){return(e+"&"+t).replace(/[&?]{1,2}/,"?")}function s(t){l(t.data)&&(t.data=e.param(t.data)),t.data&&(!t.type||"GET"==t.type.toUpperCase())&&(t.url=a(t.url,t.data))}var u,c,f=0,l=e.isObject,p=window.document,d=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,h=/^(?:text|application)\/javascript/i,y=/^(?:text|application)\/xml/i,v="application/json",g="text/html",m=/^\s*$/;e.active=0,e.ajaxJSONP=function(t){var r,a="jsonp"+ ++f,u=p.createElement("script"),c={abort:function(){e(u).remove(),a in window&&(window[a]=o),i("abort",c,t)}};return t.error&&(u.onerror=function(){c.abort(),t.error()}),window[a]=function(i){clearTimeout(r),e(u).remove(),delete window[a],n(i,c,t)},s(t),u.src=t.url.replace(/=\?/,"="+a),e("head").append(u),t.timeout>0&&(r=setTimeout(function(){c.abort(),i("timeout",c,t)},t.timeout)),c},e.ajaxSettings={type:"GET",beforeSend:o,success:o,error:o,complete:o,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:v,xml:"application/xml, text/xml",html:g,text:"text/plain"},crossDomain:!1,timeout:0},e.ajax=function(i){var f,l=e.extend({},i||{});for(u in e.ajaxSettings)void 0===l[u]&&(l[u]=e.ajaxSettings[u]);(f=l).global&&0==e.active++&&t(f,null,"ajaxStart"),l.crossDomain||(l.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(l.url)&&RegExp.$2!=window.location.host);var p=l.dataType,d=/=\?/.test(l.url);if("jsonp"==p||d)return d||(l.url=a(l.url,"callback=?")),e.ajaxJSONP(l);l.url||(l.url=window.location.toString()),s(l);var P,_=l.accepts[p],b={},w=/^([\w-]+:)\/\//.test(l.url)?RegExp.$1:window.location.protocol,x=e.ajaxSettings.xhr();l.crossDomain||(b["X-Requested-With"]="XMLHttpRequest"),_&&(b.Accept=_,_.indexOf(",")>-1&&(_=_.split(",",2)[0]),x.overrideMimeType&&x.overrideMimeType(_)),(l.contentType||l.data&&"GET"!=l.type.toUpperCase())&&(b["Content-Type"]=l.contentType||"application/x-www-form-urlencoded"),l.headers=e.extend(b,l.headers||{}),x.onreadystatechange=function(){if(4==x.readyState){clearTimeout(P);var e,t=!1;if(x.status>=200&&x.status<300||304==x.status||0==x.status&&"file:"==w){p=p||((i=x.getResponseHeader("content-type"))&&(i==g?"html":i==v?"json":h.test(i)?"script":y.test(i)&&"xml")||"text"),e=x.responseText;try{"script"==p?(0,eval)(e):"xml"==p?e=x.responseXML:"json"==p&&(e=m.test(e)?null:JSON.parse(e))}catch(e){t=e}t?r(t,"parsererror",x,l):n(e,x,l)}else r(null,"error",x,l)}var i};var E=!("async"in l)||l.async;for(c in x.open(l.type,l.url,E),l.headers)x.setRequestHeader(c,l.headers[c]);return!1===function(e,n){var r=n.context;if(!1===n.beforeSend.call(r,e,n)||!1===t(n,r,"ajaxBeforeSend",[e,n]))return!1;t(n,r,"ajaxSend",[e,n])}(x,l)?(x.abort(),!1):(l.timeout>0&&(P=setTimeout(function(){x.onreadystatechange=o,x.abort(),r(null,"timeout",x,l)},l.timeout)),x.send(l.data?l.data:null),x)},e.get=function(t,n){return e.ajax({url:t,success:n})},e.post=function(t,n,r,i){return e.isFunction(n)&&(i=i||r,r=n,n=null),e.ajax({type:"POST",url:t,data:n,success:r,dataType:i})},e.getJSON=function(t,n){return e.ajax({url:t,success:n,dataType:"json"})},e.fn.load=function(t,n){if(!this.length)return this;var r,i=this,o=t.split(/\s/);return o.length>1&&(t=o[0],r=o[1]),e.get(t,function(t){i.html(r?e(p.createElement("div")).html(t.replace(d,"")).find(r).html():t),n&&n.call(i)}),this};var P=encodeURIComponent;e.param=function(t,n){var r=[];return r.add=function(e,t){this.push(P(e)+"="+P(t))},function t(n,r,i,o){var a=e.isArray(r);e.each(r,function(r,s){o&&(r=i?o:o+"["+(a?"":r)+"]"),!o&&a?n.add(s.name,s.value):(i?e.isArray(s):l(s))?t(n,s,i,r):n.add(r,s)})}(r,t,n),r.join("&").replace("%20","+")}}(Zepto),function(e){e.fn.serializeArray=function(){var t,n=[];return e(Array.prototype.slice.call(this.get(0).elements)).each(function(){var r=(t=e(this)).attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=r&&"reset"!=r&&"button"!=r&&("radio"!=r&&"checkbox"!=r||this.checked)&&n.push({name:t.attr("name"),value:t.val()})}),n},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.defaultPrevented||this.get(0).submit()}return this}}(Zepto),function(e){function t(){i=null,o.last&&(o.el.trigger("longTap"),o={})}function n(){i&&clearTimeout(i),i=null}var r,i,o={};e(document).ready(function(){var a,s;e(document.body).bind("touchstart",function(n){var u;a=Date.now(),s=a-(o.last||a),o.el=e("tagName"in(u=n.touches[0].target)?u:u.parentNode),r&&clearTimeout(r),o.x1=n.touches[0].pageX,o.y1=n.touches[0].pageY,s>0&&s<=250&&(o.isDoubleTap=!0),o.last=a,i=setTimeout(t,750)}).bind("touchmove",function(e){n(),o.x2=e.touches[0].pageX,o.y2=e.touches[0].pageY}).bind("touchend",function(e){var t,i,a,s;n(),o.isDoubleTap?(o.el.trigger("doubleTap"),o={}):o.x2&&Math.abs(o.x1-o.x2)>30||o.y2&&Math.abs(o.y1-o.y2)>30?(o.el.trigger("swipe")&&o.el.trigger("swipe"+(t=o.x1,i=o.x2,a=o.y1,s=o.y2,Math.abs(t-i)>=Math.abs(a-s)?t-i>0?"Left":"Right":a-s>0?"Up":"Down")),o={}):"last"in o&&(o.el.trigger("tap"),r=setTimeout(function(){r=null,o.el.trigger("singleTap"),o={}},250))}).bind("touchcancel",function(){r&&clearTimeout(r),i&&clearTimeout(i),i=r=null,o={}})}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.bind(t,e)}})}(Zepto);